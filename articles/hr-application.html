<!DOCTYPE html><html class="h-full antialiased" lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="preload" as="image" imageSrcSet="/nextImageExportOptimizer/avatar.6162c07b-opt-16.WEBP 16w, /nextImageExportOptimizer/avatar.6162c07b-opt-32.WEBP 32w, /nextImageExportOptimizer/avatar.6162c07b-opt-48.WEBP 48w, /nextImageExportOptimizer/avatar.6162c07b-opt-64.WEBP 64w, /nextImageExportOptimizer/avatar.6162c07b-opt-96.WEBP 96w, /nextImageExportOptimizer/avatar.6162c07b-opt-128.WEBP 128w, /nextImageExportOptimizer/avatar.6162c07b-opt-256.WEBP 256w, /nextImageExportOptimizer/avatar.6162c07b-opt-384.WEBP 384w, /nextImageExportOptimizer/avatar.6162c07b-opt-640.WEBP 640w, /nextImageExportOptimizer/avatar.6162c07b-opt-750.WEBP 750w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 828w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1080w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1200w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1920w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 2048w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 3840w" imageSizes="4rem" data-next-head=""/><title data-next-head="">Rust HR Example Question - Daniel Butler</title><meta name="description" content="Rust Book example and solution to the HR application exercise." data-next-head=""/><script>
  let darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)')

  updateMode()
  darkModeMediaQuery.addEventListener('change', updateModeWithoutTransitions)
  window.addEventListener('storage', updateModeWithoutTransitions)

  function updateMode() {
    let isSystemDarkMode = darkModeMediaQuery.matches
    let isDarkMode = window.localStorage.isDarkMode === 'true' || (!('isDarkMode' in window.localStorage) && isSystemDarkMode)

    if (isDarkMode) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }

    if (isDarkMode === isSystemDarkMode) {
      delete window.localStorage.isDarkMode
    }
  }

  function disableTransitionsTemporarily() {
    document.documentElement.classList.add('[&_*]:!transition-none')
    window.setTimeout(() => {
      document.documentElement.classList.remove('[&_*]:!transition-none')
    }, 0)
  }

  function updateModeWithoutTransitions() {
    disableTransitionsTemporarily()
    updateMode()
  }
</script><link rel="alternate" type="application/rss+xml" href="https://daniel-butler.com/rss/feed.xml"/><link rel="alternate" type="application/feed+json" href="https://daniel-butler.com/rss/feed.json"/><link rel="preload" href="/_next/static/css/8d47a0b3eabc69c7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d47a0b3eabc69c7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-6224d37324e372cb.js" defer=""></script><script src="/_next/static/chunks/framework-5757d75364ce2279.js" defer=""></script><script src="/_next/static/chunks/main-a5869523d0d5bf46.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2fbe478a729ecc99.js" defer=""></script><script src="/_next/static/chunks/pages/articles/hr-application-44c1bdade8c4ec71.js" defer=""></script><script src="/_next/static/ri-Soyp_QoiQ0jrbkl_Vk/_buildManifest.js" defer=""></script><script src="/_next/static/ri-Soyp_QoiQ0jrbkl_Vk/_ssgManifest.js" defer=""></script></head><body class="flex h-full flex-col bg-zinc-50 dark:bg-black"><div id="__next"><div class="fixed inset-0 flex justify-center sm:px-8"><div class="flex w-full max-w-7xl lg:px-8"><div class="w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20"></div></div></div><div class="relative"><header class="pointer-events-none relative z-50 flex flex-col" style="height:var(--header-height);margin-bottom:var(--header-mb)"><div class="order-last mt-[calc(theme(spacing.16)-theme(spacing.3))]"></div><div class="sm:px-8 top-0 order-last -mb-3 pt-3" style="position:var(--header-position)"><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="top-[var(--avatar-top,theme(spacing.3))] w-full" style="position:var(--header-inner-position)"><div class="relative"><div class="absolute left-0 top-3 origin-left transition-opacity h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:ring-white/10" style="opacity:var(--avatar-border-opacity, 0);transform:var(--avatar-border-transform)"></div><a aria-label="Home" class="block h-16 w-16 origin-left pointer-events-auto" style="transform:var(--avatar-image-transform)" href="/"><img alt="" width="800" height="800" decoding="async" data-nimg="1" class="rounded-full bg-zinc-100 object-cover dark:bg-zinc-800 h-16 w-16" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;/nextImageExportOptimizer/avatar.6162c07b-opt-10.WEBP&quot;)" sizes="4rem" srcSet="/nextImageExportOptimizer/avatar.6162c07b-opt-16.WEBP 16w, /nextImageExportOptimizer/avatar.6162c07b-opt-32.WEBP 32w, /nextImageExportOptimizer/avatar.6162c07b-opt-48.WEBP 48w, /nextImageExportOptimizer/avatar.6162c07b-opt-64.WEBP 64w, /nextImageExportOptimizer/avatar.6162c07b-opt-96.WEBP 96w, /nextImageExportOptimizer/avatar.6162c07b-opt-128.WEBP 128w, /nextImageExportOptimizer/avatar.6162c07b-opt-256.WEBP 256w, /nextImageExportOptimizer/avatar.6162c07b-opt-384.WEBP 384w, /nextImageExportOptimizer/avatar.6162c07b-opt-640.WEBP 640w, /nextImageExportOptimizer/avatar.6162c07b-opt-750.WEBP 750w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 828w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1080w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1200w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 1920w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 2048w, /nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP 3840w" src="/nextImageExportOptimizer/avatar.6162c07b-opt-828.WEBP"/></a></div></div></div></div></div></div><div class="top-0 z-10 h-16 pt-6" style="position:var(--header-position)"><div class="sm:px-8 top-[var(--header-top,theme(spacing.6))] w-full" style="position:var(--header-inner-position)"><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="relative flex gap-4"><div class="flex flex-1"></div><div class="flex flex-1 justify-end md:justify-center"><div class="pointer-events-auto md:hidden" data-headlessui-state=""><button class="group flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10 dark:hover:ring-white/20" type="button" aria-expanded="false" data-headlessui-state="">Menu<svg viewBox="0 0 8 6" aria-hidden="true" class="ml-3 h-auto w-2 stroke-zinc-500 group-hover:stroke-zinc-700 dark:group-hover:stroke-zinc-400"><path d="M1.75 1.75 4 4.25l2.25-2.5" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><span hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></span><nav class="pointer-events-auto hidden md:block"><ul class="flex rounded-full bg-white/90 px-3 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10"><li><a class="relative block px-3 py-2 transition text-teal-500 dark:text-teal-400" href="/">Home<span class="absolute inset-x-1 -bottom-px h-px bg-gradient-to-r from-teal-500/0 via-teal-500/40 to-teal-500/0 dark:from-teal-400/0 dark:via-teal-400/40 dark:to-teal-400/0"></span></a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Articles</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/projects">Projects</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/platforms">Platforms</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/speaking">Speaking</a></li></ul></nav></div><div class="flex justify-end md:flex-1"><div class="pointer-events-auto"><button type="button" aria-label="Toggle dark mode" class="group rounded-full bg-white/90 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20"><svg viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-6 w-6 fill-zinc-100 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-teal-50 [@media(prefers-color-scheme:dark)]:stroke-teal-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-teal-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-teal-600"><path d="M8 12.25A4.25 4.25 0 0 1 12.25 8v0a4.25 4.25 0 0 1 4.25 4.25v0a4.25 4.25 0 0 1-4.25 4.25v0A4.25 4.25 0 0 1 8 12.25v0Z"></path><path d="M12.25 3v1.5M21.5 12.25H20M18.791 18.791l-1.06-1.06M18.791 5.709l-1.06 1.06M12.25 20v1.5M4.5 12.25H3M6.77 6.77 5.709 5.709M6.77 17.73l-1.061 1.061" fill="none"></path></svg><svg viewBox="0 0 24 24" aria-hidden="true" class="hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400 [@media_not_(prefers-color-scheme:dark)]:fill-teal-400/10 [@media_not_(prefers-color-scheme:dark)]:stroke-teal-500"><path d="M17.25 16.22a6.937 6.937 0 0 1-9.47-9.47 7.451 7.451 0 1 0 9.47 9.47ZM12.75 7C17 7 17 2.75 17 2.75S17 7 21.25 7C17 7 17 11.25 17 11.25S17 7 12.75 7Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div></div></div></div></div></div></div></header><div style="height:var(--content-offset)"></div><main><div class="sm:px-8 mt-16 lg:mt-32"><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="xl:relative"><div class="mx-auto max-w-2xl"><article><header class="flex flex-col"><h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl">Rust HR Example Question</h1><time dateTime="2023-03-08" class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500"><span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span><span class="ml-3">March 8, 2023</span></time></header><div class="mt-8 prose dark:prose-invert"><h1>Overview</h1>
<p>This is <a href="https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary">the third example problem</a> from the rust book. As before there will be a python example then the Rust example.</p>
<h2>Problem Statement</h2>
<p>Using a hash map and vectors, create a text interface to allow a user to add employee names to a department in a company. For example, “Add Sally to Engineering” or “Add Amir to Sales.” Then let the user retrieve a list of all people in a department or all people in the company by department, sorted alphabetically.</p>
<h3>Input</h3>
<pre><code>Add Sally to Engineering
Add Amir to Sales
Add Juan to Accounting
Add George to HR
Add Eric to Sales
Add Sam to Engineering
Add Cole to Engineering
List Employees
List Sales
List Engineering
List HR
</code></pre>
<h2>Python</h2>
<p>This uses a simple while loop and stores the data in a dictionary by department which is flattened with a simple list comprehension.</p>
<pre><code class="hljs language-python">employees = {}
repeat = <span class="hljs-literal">True</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">company</span>(<span class="hljs-params">command</span>):
	command_words = command.split(<span class="hljs-string">&quot; &quot;</span>)
	cmd = command_words[<span class="hljs-number">0</span>].lower()
	<span class="hljs-keyword">if</span> cmd == <span class="hljs-string">&quot;add&quot;</span>:
		name = command_words[<span class="hljs-number">1</span>]
		department = command_words[<span class="hljs-number">3</span>].lower()
		emp_department = employees.get(department, [])
		emp_department.append(name)
		employees[department] = emp_department
		<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Added <span class="hljs-subst">{name}</span> to <span class="hljs-subst">{department}</span>!&quot;</span>)
	<span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">&quot;list&quot;</span>:
		list_type = command_words[<span class="hljs-number">1</span>].lower()
		<span class="hljs-keyword">if</span> list_type == <span class="hljs-string">&quot;employees&quot;</span>:
			emps = [
				emp
				<span class="hljs-keyword">for</span> emps_dep <span class="hljs-keyword">in</span> employees.values()
				<span class="hljs-keyword">for</span> emp <span class="hljs-keyword">in</span> emps_dep
			]
			emps.sort()
			<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Employees: <span class="hljs-subst">{emps}</span>&quot;</span>)
		<span class="hljs-keyword">else</span>:
			emps = employees.get(list_type, [])
			emps.sort()
			<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Employees in Department <span class="hljs-subst">{list_type}</span>: <span class="hljs-subst">{emps}</span>&quot;</span>)
	<span class="hljs-keyword">elif</span> cmd <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;exit&quot;</span>, <span class="hljs-string">&quot;quit&quot;</span>]:
		<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Exiting...&quot;</span>)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
	
	<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>


<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Welcome: to the employee directory! when you are done type exit.\n============================\n&quot;</span>)

<span class="hljs-keyword">while</span> repeat:
	command = <span class="hljs-built_in">input</span>()
	repeat = company(command)
	
</code></pre>
<p>Output</p>
<pre><code>Welcome: to the employee directory! when you are done type exit.
============================

Add Sally to Engineering
Added Sally to engineering!
Add Amir to Sales
Added Amir to sales!
Add Juan to Accounting
Added Juan to accounting!
Add George to HR
Added George to hr!
Add Eric to Sales
Added Eric to sales!
Add Sam to Engineering
Added Sam to engineering!
Add Cole to Engineering
Added Cole to engineering!
list employees 
Employees: [&#x27;Amir&#x27;, &#x27;Cole&#x27;, &#x27;Eric&#x27;, &#x27;George&#x27;, &#x27;Juan&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]
list sales
Employees in Department sales: [&#x27;Amir&#x27;, &#x27;Eric&#x27;]
list engineering
Employees in Department engineering: [&#x27;Cole&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]
list hr 
Employees in Department hr: [&#x27;George&#x27;]
exit
Exiting...
</code></pre>
<h2>Rust</h2>
<p>This is my original rust solution. The solution takes advantage of the lessons learned from the median and mode refactoring by using entries when modifying <code>HashMap</code>s. When running into issues about typing being off or the size not being known at compile time, the errors made more sense. The stack vs. the heap is an integral concept that is never touched on in python.</p>
<pre><code class="hljs language-rust"><span class="hljs-keyword">use</span> std::collections::HashMap;
<span class="hljs-keyword">use</span> std::io;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
	<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">employees_real</span>: HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();
	<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">repeat</span> = <span class="hljs-literal">true</span>;
	
	<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);
	<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;============================&quot;</span>);
	
	<span class="hljs-keyword">while</span> repeat {
		<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">input</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();
		io::<span class="hljs-title function_ invoke__">stdin</span>().<span class="hljs-title function_ invoke__">read_line</span>(&amp;<span class="hljs-keyword">mut</span> input).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;Invalid input!&quot;</span>);
		<span class="hljs-keyword">let</span> <span class="hljs-variable">input</span> = input.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>();
		<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Input: {}&quot;</span>, input);
		repeat = <span class="hljs-title function_ invoke__">record_employee</span>(&amp;input, &amp;<span class="hljs-keyword">mut</span> employees_real);
	}
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">record_employee</span>(command: &amp;<span class="hljs-type">String</span>, employees: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
	<span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">map</span>(<span class="hljs-type">String</span>::from).<span class="hljs-title function_ invoke__">collect</span>();
	<span class="hljs-keyword">let</span> <span class="hljs-variable">cmd</span> = command_words[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">to_string</span>().<span class="hljs-title function_ invoke__">to_lowercase</span>();
	
	<span class="hljs-keyword">if</span> cmd == <span class="hljs-string">&quot;add&quot;</span> {
		<span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_string</span>();
		<span class="hljs-keyword">let</span> <span class="hljs-variable">dep</span> = command_words[<span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">to_string</span>().<span class="hljs-title function_ invoke__">to_lowercase</span>();
		<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Added {} to {}&quot;</span>, name, dep);
		employees.<span class="hljs-title function_ invoke__">entry</span>(dep).<span class="hljs-title function_ invoke__">or_insert_with</span>(<span class="hljs-type">Vec</span>::new).<span class="hljs-title function_ invoke__">push</span>(name);
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> cmd == <span class="hljs-string">&quot;list&quot;</span> {
		<span class="hljs-keyword">let</span> <span class="hljs-variable">list_type</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();
		
		<span class="hljs-keyword">if</span> list_type == <span class="hljs-string">&quot;employees&quot;</span> {
			<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
			<span class="hljs-keyword">for</span> (_dept, dept_emps) <span class="hljs-keyword">in</span> employees.<span class="hljs-title function_ invoke__">iter</span>() {
				<span class="hljs-keyword">for</span> <span class="hljs-variable">emp</span> <span class="hljs-keyword">in</span> dept_emps.<span class="hljs-title function_ invoke__">into_iter</span>() {
					emps.<span class="hljs-title function_ invoke__">push</span>(emp);
				}
			}
			emps.<span class="hljs-title function_ invoke__">sort</span>();
			<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">let</span> <span class="hljs-variable">nut</span> emps = employees.<span class="hljs-title function_ invoke__">get</span>(&amp;list_type).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">unwrap_or_default</span>();
			emps.<span class="hljs-title function_ invoke__">sort</span>();
			<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exiting...&quot;</span>);
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}
}
</code></pre>
<p>Output</p>
<pre><code>Welcome: to the employee directory! when you are done type exit.
============================
Input: Add Sally to Engineering
Added Sally to engineering
Input: Add Amir to Sales
Added Amir to sales
Input: Add Juan to Accounting
Added Juan to accounting
Input: Add George to HR
Added George to hr
Input: Add Eric to Sales
Added Eric to sales
Input: Add Sam to Engineering
Added Sam to engineering
Input: Add Cole to Engineering
Added Cole to engineering
Input: List Employees
Employees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]
Input: List Sales
Employees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]
Input: List Engineering
Employees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]
Input: List HR
Employees in Department hr: [&quot;George&quot;]
Input: Exit
Exiting...
</code></pre>
<p>Looks good!!</p>
<h3>Challenges</h3>
<p>The major hurdle when creating the solution above was how to split the input by whitespace into a vector of strings.  I asked ChatGPT for some help...</p>
<blockquote>
<p>How can this error be fixed?</p>
</blockquote>
<pre><code>a value of type `Vec&lt;&amp;String&gt;` cannot be built from an iterator over elements of type `&amp;str`
</code></pre>
<blockquote>
<p>the error comes from this line of rust code:</p>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-type">String</span>&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">collect</span>();
</code></pre>
<p>The response which was very helpful.</p>
<blockquote>
<p>The error message suggests that the <code>split_whitespace()</code> method is returning an iterator over <code>&amp;str</code> values, but you are trying to collect them into a <code>Vec&lt;&amp;String&gt;</code>, which expects references to <code>String</code> values.
To fix this error, you can either change the type of <code>command_words</code> to <code>Vec&lt;&amp;str&gt;</code>:</p>
</blockquote>
<pre><code class="hljs language-rust">`<span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-type">str</span>&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">collect</span>();`
</code></pre>
<blockquote>
<p>Or you can change the type of the elements in the <code>Vec</code> to <code>String</code> instead of <code>&amp;String</code>:</p>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">map</span>(<span class="hljs-type">String</span>::from).<span class="hljs-title function_ invoke__">collect</span>();`
</code></pre>
<blockquote>
<p>The <code>map()</code> method is used to transform each <code>&amp;str</code> value into a <code>String</code> value.</p>
</blockquote>
<h2>Refactoring</h2>
<p>Now time for the refactoring!! I asked how the code above could be more idiomatic. Here was the response.</p>
<blockquote>
<p>Here are some suggestions to make the Rust code more idiomatic:</p>
</blockquote>
<blockquote>
<ol>
<li>Use pattern matching instead of if/else statements:</li>
</ol>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">match</span> cmd.<span class="hljs-title function_ invoke__">as_str</span>() {
    <span class="hljs-string">&quot;add&quot;</span> =&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_string</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-variable">dep</span> = command_words[<span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">to_string</span>().<span class="hljs-title function_ invoke__">to_lowercase</span>();
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Added {} to {}&quot;</span>, name, dep);
        employees.<span class="hljs-title function_ invoke__">entry</span>(dep).<span class="hljs-title function_ invoke__">or_insert_with</span>(<span class="hljs-type">Vec</span>::new).<span class="hljs-title function_ invoke__">push</span>(name);
        <span class="hljs-literal">true</span>
    }
    <span class="hljs-string">&quot;list&quot;</span> =&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-variable">list_type</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();

        <span class="hljs-keyword">if</span> list_type == <span class="hljs-string">&quot;employees&quot;</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
            <span class="hljs-keyword">for</span> (_dept, dept_emps) <span class="hljs-keyword">in</span> employees.<span class="hljs-title function_ invoke__">iter</span>() {
                emps.<span class="hljs-title function_ invoke__">extend</span>(dept_emps);
            }
            emps.<span class="hljs-title function_ invoke__">sort</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
            <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = employees.<span class="hljs-title function_ invoke__">get</span>(&amp;list_type).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">unwrap_or_default</span>();
            emps.<span class="hljs-title function_ invoke__">sort</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);
            <span class="hljs-literal">true</span>
        }
    }
    _ =&gt; {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exiting...&quot;</span>);
        <span class="hljs-literal">false</span>
    }
}
</code></pre>
<blockquote>
<ol start="2">
<li>Use <code>if let</code> instead of <code>unwrap_or_default</code>:</li>
</ol>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(emps) = employees.<span class="hljs-title function_ invoke__">get</span>(&amp;list_type) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = emps.<span class="hljs-title function_ invoke__">clone</span>();
    emps.<span class="hljs-title function_ invoke__">sort</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Department {} not found&quot;</span>, list_type);
}
<span class="hljs-literal">true</span>
</code></pre>
<blockquote>
<ol start="3">
<li>Use <code>flatten</code> instead of nested loops:</li>
</ol>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">emps</span> = employees.<span class="hljs-title function_ invoke__">values</span>().<span class="hljs-title function_ invoke__">flatten</span>().<span class="hljs-title function_ invoke__">cloned</span>().collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
<span class="hljs-literal">true</span>

</code></pre>
<blockquote>
<ol start="4">
<li>Use <code>&amp;str</code> instead of <code>String</code> when possible:</li>
</ol>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">record_employee</span>(command: &amp;<span class="hljs-type">str</span>, employees: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">collect</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-variable">cmd</span> = command_words[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();

    <span class="hljs-keyword">match</span> cmd.<span class="hljs-title function_ invoke__">as_str</span>() {
        <span class="hljs-string">&quot;add&quot;</span> =&gt; {
            <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_string</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-variable">dep</span> = command_words[<span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Added {} to {}&quot;</span>, name, dep);
            employees.<span class="hljs-title function_ invoke__">entry</span>(dep).<span class="hljs-title function_ invoke__">or_insert_with</span>(<span class="hljs-type">Vec</span>::new).<span class="hljs-title function_ invoke__">push</span>(name);
            <span class="hljs-literal">true</span>
        }
        <span class="hljs-string">&quot;list&quot;</span> =&gt; {
            <span class="hljs-keyword">let</span> <span class="hljs-variable">list_type</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();

            <span class="hljs-keyword">if</span> list_type == <span class="hljs-string">&quot;employees&quot;</span> {
                <span class="hljs-keyword">let</span> <span class="hljs-variable">emps</span> = employees.<span class="hljs-title function_ invoke__">values</span>().<span class="hljs-title function_ invoke__">flatten</span>().<span class="hljs-title function_ invoke__">cloned</span>().collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
                <span class="hljs-literal">true</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(emps) = employees.<span class="hljs-title function_ invoke__">get</span>(&amp;list_type) {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = emps.<span class="hljs-title function_ invoke__">clone</span>();
                emps.<span class="hljs-title function_ invoke__">sort</span>();
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);
                <span class="hljs-literal">true</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Department {} not found&quot;</span>, list_type);
                <span class="hljs-literal">true</span>
            }
        }
        _ =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exiting...&quot;</span>);
            <span class="hljs-literal">false</span>
        }
    }
}
</code></pre>
<blockquote>
<ol start="5">
<li>Use <code>let mut</code> only when necessary:</li>
</ol>
</blockquote>
<pre><code class="hljs language-rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
<span class="hljs-keyword">for</span> <span class="hljs-variable">dept_emps</span> <span class="hljs-keyword">in</span> employees.<span class="hljs-title function_ invoke__">values</span>() {
    emps.<span class="hljs-title function_ invoke__">extend</span>(dept_emps);
}
emps.<span class="hljs-title function_ invoke__">sort</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
<span class="hljs-literal">true</span>
</code></pre>
<p>Since it is broken into a few sections. I&#x27;ve put it all into a working code block below with the exception of point #5 because it conflicts with the flatten method #3. Flatten makes more sense to me. It is debatable that #5 is a clearer way to express the logic.</p>
<pre><code class="hljs language-rust"><span class="hljs-keyword">use</span> std::collections::HashMap;
<span class="hljs-keyword">use</span> std::io;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
	<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">employees_real</span>: HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();
	<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">repeat</span> = <span class="hljs-literal">true</span>;
	
	<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);
	<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;============================&quot;</span>);
	
	<span class="hljs-keyword">while</span> repeat {
		<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">input</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();
		io::<span class="hljs-title function_ invoke__">stdin</span>().<span class="hljs-title function_ invoke__">read_line</span>(&amp;<span class="hljs-keyword">mut</span> input).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;Invalid input!&quot;</span>);
		<span class="hljs-keyword">let</span> <span class="hljs-variable">input</span> = input.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>();
		<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Input: {}&quot;</span>, input);
		repeat = <span class="hljs-title function_ invoke__">record_employee</span>(&amp;input, &amp;<span class="hljs-keyword">mut</span> employees_real);
	}
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">record_employee</span>(command: &amp;<span class="hljs-type">String</span>, employees: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
	<span class="hljs-keyword">let</span> <span class="hljs-variable">command_words</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = command.<span class="hljs-title function_ invoke__">split_whitespace</span>().<span class="hljs-title function_ invoke__">collect</span>();
	<span class="hljs-keyword">let</span> <span class="hljs-variable">cmd</span> = command_words[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();
	
	<span class="hljs-keyword">match</span> cmd.<span class="hljs-title function_ invoke__">as_str</span>() {
		
		<span class="hljs-string">&quot;add&quot;</span> =&gt; {
		    <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_string</span>();
		    <span class="hljs-keyword">let</span> <span class="hljs-variable">dep</span> = command_words[<span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();
		    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Added {} to {}&quot;</span>, name, dep);
		    employees.<span class="hljs-title function_ invoke__">entry</span>(dep).<span class="hljs-title function_ invoke__">or_insert_with</span>(<span class="hljs-type">Vec</span>::new).<span class="hljs-title function_ invoke__">push</span>(name);
		    <span class="hljs-literal">true</span>
	    }
		
	    <span class="hljs-string">&quot;list&quot;</span> =&gt; {
		    <span class="hljs-keyword">let</span> <span class="hljs-variable">list_type</span> = command_words[<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">to_lowercase</span>();
		
		    <span class="hljs-keyword">if</span> list_type == <span class="hljs-string">&quot;employees&quot;</span> {
			    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = employees.<span class="hljs-title function_ invoke__">values</span>().<span class="hljs-title function_ invoke__">flatten</span>().<span class="hljs-title function_ invoke__">cloned</span>().collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
			    emps.<span class="hljs-title function_ invoke__">sort</span>();
			    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees: {:?}&quot;</span>, emps);
		    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(emps) = employees.<span class="hljs-title function_ invoke__">get</span>(&amp;list_type) {
				<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emps</span> = emps.<span class="hljs-title function_ invoke__">clone</span>();
				emps.<span class="hljs-title function_ invoke__">sort</span>();
				<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Department {} not found&quot;</span>, list_type);
			}
			<span class="hljs-literal">true</span>
	    }
		
	    _ =&gt; {
		    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exiting...&quot;</span>);
		    <span class="hljs-literal">false</span>
	    }
	}
}
</code></pre>
<p>Output</p>
<pre><code>Welcome: to the employee directory! when you are done type exit.
============================
Input: Add Sally to Engineering
Added Sally to engineering
Input: Add Amir to Sales
Added Amir to sales
Input: Add Juan to Accounting
Added Juan to accounting
Input: Add George to HR
Added George to hr
Input: Add Eric to Sales
Added Eric to sales
Input: Add Sam to Engineering
Added Sam to engineering
Input: Add Cole to Engineering
Added Cole to engineering
Input: List Employees
Employees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]
Input: List Sales
Employees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]
Input: List Engineering
Employees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]
Input: List HR
Employees in Department hr: [&quot;George&quot;]
Input: Exit
Exiting...
</code></pre>
<p>Overall I&#x27;m impressed with the result. I think it helped show how to use the <code>collect::&lt;T&gt;()</code> method to convert types and how to use <code>if let</code> idiomatically.</p></div></article></div></div></div></div></div></div></main><footer class="mt-32"><div class="sm:px-8"><div class="mx-auto max-w-7xl lg:px-8"><div class="border-t border-zinc-100 pt-10 pb-16 dark:border-zinc-700/40"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="flex flex-col items-center justify-between gap-6 sm:flex-row"><div class="flex gap-6 text-sm font-medium text-zinc-800 dark:text-zinc-200"><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Articles</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/projects">Projects</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/platforms">Platforms</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/speaking">Speaking</a></div><p class="text-sm text-zinc-400 dark:text-zinc-500">© <!-- -->2025<!-- --> Daniel Butler. All rights reserved.</p></div></div></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/articles/hr-application","query":{},"buildId":"ri-Soyp_QoiQ0jrbkl_Vk","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>