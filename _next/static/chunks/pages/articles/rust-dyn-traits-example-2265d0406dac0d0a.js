(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{2957:function(n,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/rust-dyn-traits-example",function(){return e(3819)}])},126:function(n,s,e){"use strict";e.d(s,{B:function(){return k}});var a=e(1799),c=e(9396),t=e(5893),o=e(9008),l=e.n(o),i=e(1163),r=e(956),p=e(5933),d=e(6010);function u(n){var s=n.children,e=n.className;return(0,t.jsx)("div",{className:(0,d.Z)(e,"prose dark:prose-invert"),children:s})}function m(n){return(0,t.jsx)("svg",(0,c.Z)((0,a.Z)({viewBox:"0 0 16 16",fill:"none","aria-hidden":"true"},n),{children:(0,t.jsx)("path",{d:"M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}function k(n){var s=n.children,e=n.meta,a=n.isRssFeed,c=n.previousPathname,o=(0,i.useRouter)();return void 0!==a&&a?s:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:"".concat(e.title," - Daniel Butler")}),(0,t.jsx)("meta",{name:"description",content:e.description})]}),(0,t.jsx)(r.W,{className:"mt-16 lg:mt-32",children:(0,t.jsx)("div",{className:"xl:relative",children:(0,t.jsxs)("div",{className:"mx-auto max-w-2xl",children:[c&&(0,t.jsx)("button",{type:"button",onClick:function(){return o.back()},"aria-label":"Go back to articles",className:"group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0",children:(0,t.jsx)(m,{className:"h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"})}),(0,t.jsxs)("article",{children:[(0,t.jsxs)("header",{className:"flex flex-col",children:[(0,t.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:e.title}),(0,t.jsxs)("time",{dateTime:e.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,t.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,t.jsx)("span",{className:"ml-3",children:(0,p.p)(e.date)})]})]}),(0,t.jsx)(u,{className:"mt-8",children:s})]})]})})})]})}},5933:function(n,s,e){"use strict";function a(n){return new Date("".concat(n,"T00:00:00Z")).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}e.d(s,{p:function(){return a}})},3819:function(n,s,e){"use strict";e.r(s),e.d(s,{meta:function(){return o}});var a=e(5893),c=e(1151),t=e(126),o={author:"Daniel Butler",date:"2023-05-05",title:"Rust Book Dynamic Traits Example",description:"Expanding on the example in Rust Book's chapter 17 section 3. Refactored with ChatGPT 4s help."},l=function(n){return(0,a.jsx)(t.B,Object.assign({meta:o},n))};function i(n){var s=Object.assign({h2:"h2",p:"p",a:"a",blockquote:"blockquote",ul:"ul",li:"li",code:"code",h3:"h3",pre:"pre",span:"span",ol:"ol"},(0,c.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{children:"Overview"}),"\n",(0,a.jsxs)(s.p,{children:["The example comes from the prompt below in the ",(0,a.jsx)(s.a,{href:"https://doc.rust-lang.org/book/ch17-03-oo-design-patterns.html",children:"rust book's chapter 17 section 3"}),"."]}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsx)(s.p,{children:"To see the simplicity of maintaining code that uses the state pattern, try a few of these suggestions:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Add a\xa0",(0,a.jsx)(s.code,{children:"reject"}),"\xa0method that changes the postâ€™s state from\xa0",(0,a.jsx)(s.code,{children:"PendingReview"}),"\xa0back to\xa0",(0,a.jsx)(s.code,{children:"Draft"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Require two calls to\xa0",(0,a.jsx)(s.code,{children:"approve"}),"\xa0before the state can be changed to\xa0",(0,a.jsx)(s.code,{children:"Published"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Allow users to add text content only when a post is in the\xa0",(0,a.jsx)(s.code,{children:"Draft"}),"\xa0state. Hint: have the state object responsible for what might change about the content but not responsible for modifying the\xa0",(0,a.jsx)(s.code,{children:"Post"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{children:"Result"}),"\n",(0,a.jsxs)(s.p,{children:["Below is the code I wrote to solve the three challenges above. I struggled with getting the value for the ",(0,a.jsx)(s.code,{children:"Optional<Box<...>>"}),". I'm starting to grasp that it all goes back to the types when working with rust. Types are not as big of a deal in Python, so that is taking some getting used to."]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"use"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["blog",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Post"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"main"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," post ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n    post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"add_text"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"I ate a salad for lunch today"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token macro property",children:"assert_eq!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'""'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n    post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token macro property",children:"assert_eq!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'""'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	\n	post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	",(0,a.jsx)(s.span,{className:"token macro property",children:"assert_eq!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'""'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	\n	post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token macro property",children:"assert_eq!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'""'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	\n	post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n	",(0,a.jsx)(s.span,{className:"token macro property",children:"assert_eq!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"I ate a salad for lunch today"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"mod"})," ",(0,a.jsx)(s.span,{className:"token module-declaration namespace",children:"blog"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		state",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Option"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">>"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n		content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				state",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n				content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"add_text"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," text",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"as_ref"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token macro property",children:"println!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Can add content: {}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"can_add_content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			\n				",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"can_add_content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n					",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"push_str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"text",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n				",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"str"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," content ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"as_ref"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"unwrap"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			",(0,a.jsx)(s.span,{className:"token macro property",children:"println!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"content: {}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," content",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			content\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"take"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"take"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"take"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"trait"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"State"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"content"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," _post",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"str"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token string",children:'""'}),"\n		 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"can_add_content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"bool"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token boolean",children:"false"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"for"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		 \n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		 \n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"can_add_content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"bool"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token boolean",children:"true"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		reviews",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"i8"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," reviews",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"0"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"add_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"reviews ",(0,a.jsx)(s.span,{className:"token operator",children:"+="})," ",(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"get_reviews"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"i8"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"reviews\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"for"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n			state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"add_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n		\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"as_ref"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"get_reviews"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=="})," ",(0,a.jsx)(s.span,{className:"token number",children:"0"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"else"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n				",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Published"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n			",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n		 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Published"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	\n	",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"for"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Published"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		\n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		 \n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"Self"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Box"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"dyn"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token operator",children:">"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n		 	",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),"\n		 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n		 \n		",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"content"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"str"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n			",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),"post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content\n		",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n	",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.h2,{children:"Refinement"}),"\n",(0,a.jsx)(s.p,{children:"Now, what can be learned from asking ChatGPT?"}),"\n",(0,a.jsx)(s.p,{children:"Open AI's ChatGPT prompt."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"Refactor this code to be more performant.\n"})}),"\n",(0,a.jsx)(s.h3,{children:"Response"}),"\n",(0,a.jsxs)(s.p,{children:["One possible way to make the code more performant is to avoid unnecessary allocations and cloning of data. One such example is in the ",(0,a.jsx)(s.code,{children:"content()"})," method of the ",(0,a.jsx)(s.code,{children:"State"})," trait, where the content is cloned unnecessarily."]}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Instead, we can use a reference to the existing content to avoid the clone:"}),"\n"]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"content"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," post",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token lifetime-annotation symbol",children:"'a"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"str"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),"post",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsxs)(s.ol,{start:"2",children:["\n",(0,a.jsxs)(s.li,{children:["Similarly, in the ",(0,a.jsx)(s.code,{children:"add_text()"})," method of the ",(0,a.jsx)(s.code,{children:"Post"})," struct, we can use a reference to the text to avoid the allocation and copying of the string:"]}),"\n"]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"add_text"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," text",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Some"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"as_ref"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," s",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"can_add_content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"push_str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"text",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsxs)(s.ol,{start:"3",children:["\n",(0,a.jsx)(s.li,{children:"We can also avoid unnecessary boxing and dynamic dispatch by using an enum instead of a trait object for the state of the post. This can simplify the code and make it more efficient:"}),"\n"]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"mod"})," ",(0,a.jsx)(s.span,{className:"token module-declaration namespace",children:"blog"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        state",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n        content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token attribute attr-name",children:"#[derive(Debug)]"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"State"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," can_add_content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"bool"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n        ",(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," reviews",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"i8"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n        ",(0,a.jsx)(s.span,{className:"token class-name",children:"Published"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"Post"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                state",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," can_add_content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"true"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n                content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token function",children:"new"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"add_text"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," text",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," can_add_content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"true"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"push_str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"text",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"content"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"str"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Published"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"content\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"else"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token string",children:'""'}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"request_review"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:".."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," reviews",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"0"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"approve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," reviews ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token operator",children:"*"}),"reviews ",(0,a.jsx)(s.span,{className:"token operator",children:"+="})," ",(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n                ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"*"}),"reviews ",(0,a.jsx)(s.span,{className:"token operator",children:">="})," ",(0,a.jsx)(s.span,{className:"token number",children:"2"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                    ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Published"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n                ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"reject"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"PendingReview"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:".."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n                ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"state ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"State"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Draft"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," can_add_content",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"true"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"With these changes, the code should be more efficient and performant."}),"\n",(0,a.jsx)(s.h2,{children:"Summary"}),"\n",(0,a.jsxs)(s.p,{children:["For the first two points, as best I can tell, it is already happening. And the last point is fair and even called out in the rusty book. We used ",(0,a.jsx)(s.code,{children:"Box"}),"s to show how they work with ",(0,a.jsx)(s.code,{children:"dyn trait"}),"s. Overall because I didn't come up with a majority of the code it didn't leave a lot of room for ChatGPT to fix it."]})]})}s.default=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(l,Object.assign({},n,{children:(0,a.jsx)(i,n)}))}},9008:function(n,s,e){n.exports=e(5443)},1151:function(n,s,e){"use strict";e.d(s,{ah:function(){return t}});var a=e(7294);let c=a.createContext({});function t(n){let s=a.useContext(c);return a.useMemo(()=>"function"==typeof n?n(s):{...s,...n},[s,n])}}},function(n){n.O(0,[774,888,179],function(){return n(n.s=2957)}),_N_E=n.O()}]);