(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{232:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});let a={src:"/_next/static/media/core-foodservice.15de6778.svg",height:71,width:158,blurWidth:0,blurHeight:0}},1668:(e,s,n)=>{"use strict";n.d(s,{R:()=>l});var a=n(4232);let t=a.createContext({});function l(e){let s=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}},4198:(e,s,n)=>{"use strict";n.d(s,{T:()=>o});var a=n(7876),t=n(7328),l=n.n(t),r=n(9956),i=n(4565),h=n(9241);function c({children:e,className:s}){return(0,a.jsx)("div",{className:(0,h.A)(s,"prose dark:prose-invert"),children:e})}function o({children:e,meta:s,isRssFeed:n=!1,previousPathname:t}){return n?e:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:`${s.title} - Daniel Butler`}),(0,a.jsx)("meta",{name:"description",content:s.description})]}),(0,a.jsx)(r.m,{className:"mt-16 lg:mt-32",children:(0,a.jsx)("div",{className:"xl:relative",children:(0,a.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,a.jsxs)("article",{children:[(0,a.jsxs)("header",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:s.title}),(0,a.jsxs)("time",{dateTime:s.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,a.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,a.jsx)("span",{className:"ml-3",children:(0,i.Y)(s.date)})]})]}),(0,a.jsx)(c,{className:"mt-8",children:e})]})})})})]})}},4565:(e,s,n)=>{"use strict";function a(e){return new Date(`${e}T00:00:00Z`).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}n.d(s,{Y:()=>a})},7377:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/revenue",function(){return n(7417)}])},7417:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>m,meta:()=>c});var a=n(7876),t=n(1668),l=n(4198),r=n(232);let i={src:"/_next/static/media/revenue-landing-page.c2f1dda1.png",height:969,width:1670,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAIVBMVEX+//7V0Nj5+PlqSnlyUYHLwdHGvMzLztDc1+CprLWoorCghvB6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAKElEQVR4nC3BgQ0AIAwCMBDYpv8fbGJsUZWkciDZloX1oPE1SDY5+wINZgCE8w2yhwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5};var h=n(9410);let c={author:"Daniel Butler",date:"2020-05-15",title:"Revenue",description:"A webapp that optimizes workflows of integral daily and monthly accounting processes.",logo:r.A,platform:"Connect"},o=e=>(0,a.jsx)(l.T,{meta:c,...e});function d(e){let s={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{children:"Overview"}),"\n",(0,a.jsx)(s.p,{children:"The project was a webpage that automated the most difficult and tedious journal entries the revenue team had to complete.\nAdditionally, aggregated aging data across the various entities tracked separately in the accounting system.\nThe combined aging data was used to streamline the month end closing process."}),"\n",(0,a.jsx)(h.A,{src:i,alt:"Main page"}),"\n",(0,a.jsx)(s.p,{children:"The CORE Group had close to twenty different legal entities each with their own set of books.\nThe customers would make a payment (or multiple payments) to one of the entities.\nWhen the accounting department booked the revenue to properly recognize the revenue the payment had to split between the entities."}),"\n",(0,a.jsx)(s.h2,{children:"Features and Value added"}),"\n",(0,a.jsx)(s.h3,{children:"Automated Journal Entries"}),"\n",(0,a.jsx)(s.p,{children:"The webpage took an Excel file broken down by location and generated the various intercompany and Customer Invoice entries to clean up the Customer Aging.\nThe webpage was processed by the backend server to pull out the relevant data reducing the fields needed to be entered.\nThe final result was a csv file that was imported into each Company's accounting system."}),"\n",(0,a.jsx)(s.h3,{children:"Aging"}),"\n",(0,a.jsx)(s.p,{children:"The Aging is a report of entries that do not have a corresponding offsetting entry in the books, or they have not been applied.\nThis is a standard Accounting report generated by accounting systems.\nThe complexity for the CORE Group was that there were close to twenty of these reports each could have information related to the other one.\nThe Aging page combined all the entities into a single report to make reconciliation easier."}),"\n",(0,a.jsxs)("video",{className:"w-max",children:[(0,a.jsx)("source",{src:"/media/revenue-demo-video.mp4",type:"video/mp4",controls:!0}),(0,a.jsx)(s.p,{children:"The browser does not support the video tag unfortunately."})]}),"\n",(0,a.jsx)(s.h2,{children:"Development Process"}),"\n",(0,a.jsx)(s.p,{children:"The application was developed and used in production in three weeks.\nThe first phase generated the journal entries only.\nThe second phase looked at the file to autofill the form needed to generate the entry.\n10 fields are need to complete the entry after the second phase all, but one of the fields was autofilled.\nThe third phase was adding the aging report and only came about because of discussions with the team to see what pain points they had in their process overall."}),"\n",(0,a.jsx)(s.p,{children:"The application was built with flask and used sql alchemy to query the MSSQL database.\nAdditionally, the frontend used vue.js for the front end automation and ajax requests to parse the excel file."}),"\n",(0,a.jsx)(s.h3,{children:"Learning"}),"\n",(0,a.jsx)(s.p,{children:"At the time, I was on a Domain Driven Design kick, so I used that to build the webpage.\nI really should not have because it was not a heavy domain logic problem, so the architecture added unnecessary overhead.\nI had to do some really weird things, like attach the response of the handlers to the unit of work object, below is an example."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-python",children:[(0,a.jsx)(s.span,{className:"hljs-keyword",children:"def"})," ",(0,a.jsx)(s.span,{className:"hljs-title function_",children:"generate_imports"}),"():\n    ...\n    cmd = commands.CreateJEImports(\n        imported_data=imported_data_df.to_dict(orient=",(0,a.jsx)(s.span,{className:"hljs-string",children:"'records'"}),"),\n        ",(0,a.jsx)(s.span,{className:"hljs-comment",children:"# ..."}),"\n    )\n    bus.handle(cmd)\n    ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"return"})," bus.uow.response  ",(0,a.jsxs)(s.span,{className:"hljs-comment",children:["# ",(0,a.jsx)(s.span,{className:"hljs-doctag",children:"TODO:"})," see if there is a better way!"]}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"In order to support the synchronous nature of the request/response of the webserver the message bus had to have separate methods to return a value."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-python",children:[(0,a.jsx)(s.span,{className:"hljs-keyword",children:"class"})," ",(0,a.jsx)(s.span,{className:"hljs-title class_",children:"MessageBus"}),":\n    ...\n\n    ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"def"})," ",(0,a.jsx)(s.span,{className:"hljs-title function_",children:"handle_with_return_value"}),"(",(0,a.jsx)(s.span,{className:"hljs-params",children:"self, message: Message"}),") -> typing.",(0,a.jsx)(s.span,{className:"hljs-type",children:"Any"}),":\n        ",(0,a.jsx)(s.span,{className:"hljs-string",children:'"""Only handles message...\n        Will not handle the events generated\n        from the message (Command or Event) parameter\n        """'}),"\n        ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"hljs-built_in",children:"isinstance"}),"(message, events.Event):\n            logger.debug(\n                ",(0,a.jsx)(s.span,{className:"hljs-string",children:"'Handling message of type '"}),"\n                ",(0,a.jsx)(s.span,{className:"hljs-string",children:"'Event with result value'"}),"\n            )\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"try"}),":\n                handler = ",(0,a.jsx)(s.span,{className:"hljs-variable language_",children:"self"}),".event_handlers[",(0,a.jsx)(s.span,{className:"hljs-built_in",children:"type"}),"(message)]\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"return"})," handler(message)  ",(0,a.jsx)(s.span,{className:"hljs-comment",children:"# <-- Return happening here"}),"\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"except"})," KeyError ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"as"})," e:\n                logger.exception(\n                    ",(0,a.jsx)(s.span,{className:"hljs-string",children:"f'Exception handling Event '"}),"\n                    ",(0,a.jsxs)(s.span,{className:"hljs-string",children:["f'",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{message}"})," no handler set'"]}),"\n                )\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"raise"}),"\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"except"})," Exception ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"as"})," e:\n                logger.exception(\n                    ",(0,a.jsx)(s.span,{className:"hljs-string",children:"f'Exception handling Event with '"}),"\n                    ",(0,a.jsxs)(s.span,{className:"hljs-string",children:["f'return value ",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{message}"})," error: ",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{e}"}),"'"]}),",\n                    exc_info=",(0,a.jsx)(s.span,{className:"hljs-literal",children:"True"}),"\n                )\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"raise"}),"\n\n        ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"hljs-built_in",children:"isinstance"}),"(message, commands.Command):\n            logger.debug(\n                ",(0,a.jsx)(s.span,{className:"hljs-string",children:"'Handling message of type '"}),"\n                ",(0,a.jsx)(s.span,{className:"hljs-string",children:"'Command with result value'"}),"\n            )\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"try"}),":\n                handler = ",(0,a.jsx)(s.span,{className:"hljs-variable language_",children:"self"}),".command_handlers[",(0,a.jsx)(s.span,{className:"hljs-built_in",children:"type"}),"(message)]\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"return"})," handler(message)  ",(0,a.jsx)(s.span,{className:"hljs-comment",children:"# <-- Return happening here"}),"\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"except"})," KeyError ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"as"})," e:\n                logger.exception(\n                    ",(0,a.jsx)(s.span,{className:"hljs-string",children:"f'Exception handling Command '"}),"\n                    ",(0,a.jsxs)(s.span,{className:"hljs-string",children:["f'",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{message}"})," no handler set'"]}),",\n                    exc_info=",(0,a.jsx)(s.span,{className:"hljs-literal",children:"True"}),"\n                )\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"raise"}),"\n            ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"except"})," Exception ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"as"})," e:\n                logger.exception(\n                    ",(0,a.jsx)(s.span,{className:"hljs-string",children:"f'Exception handling Command with '"}),"\n                    ",(0,a.jsxs)(s.span,{className:"hljs-string",children:["f'return value ",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{message}"})," error: ",(0,a.jsx)(s.span,{className:"hljs-subst",children:"{e}"}),"'"]}),",\n                    exc_info=",(0,a.jsx)(s.span,{className:"hljs-literal",children:"True"}),"\n                )\n                ",(0,a.jsx)(s.span,{className:"hljs-keyword",children:"raise"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"Both of those broke the crux of the Command and Query Responsibility Segregation which was used as the architecture of the codebase."}),"\n",(0,a.jsx)(s.h2,{children:"Extras"}),"\n",(0,a.jsx)(s.p,{children:"Because we could leverage the current process the team used the Excel file that was parsed used tab names to delineate which one to use."})]})}function m(e={}){return(0,a.jsx)(o,{...e,children:(0,a.jsx)(d,{...e})})}}},e=>{e.O(0,[351,636,593,792],()=>e(e.s=7377)),_N_E=e.O()}]);