{
    "version": "https://jsonfeed.org/version/1",
    "title": "Daniel Butler",
    "home_page_url": "https://daniel-butler.com",
    "feed_url": "https://daniel-butler.com/rss/feed.json",
    "description": "A collection of thoughts",
    "icon": "https://daniel-butler.com/favicon.ico",
    "author": {
        "name": "Daniel Butler"
    },
    "items": [
        {
            "id": "https://daniel-butler.com/articles/onenote-extractor",
            "content_html": "<p><strong>Bottom line:</strong> Got a OneNote notebook you want in markdown? This tool extracts it in minutes with just a view-only link. No API setup, no OAuth dance, no fighting with Microsoft&#x27;s export button.</p>\n<h2>What You Get</h2>\n<p><strong>Clean markdown files</strong> from your OneNote notebooks:</p>\n<ul>\n<li>One .md file per page</li>\n<li>Organized by section (matches your notebook structure)</li>\n<li>Plain text that works anywhere (Obsidian, VS Code, grep, git)</li>\n<li>Extracted in 2-3 seconds per page</li>\n</ul>\n<p><strong>Use it when:</strong></p>\n<ul>\n<li>You want to migrate your notes to another platform</li>\n<li>You need a backup outside Microsoft&#x27;s ecosystem</li>\n<li>You have view-only access to a shared notebook and want your own copy</li>\n<li>Microsoft&#x27;s export button is grayed out or missing</li>\n<li>You want searchable, version-controllable text files</li>\n</ul>\n<p><strong>Skip it if:</strong></p>\n<ul>\n<li>You need images or formatting preserved (text only right now)</li>\n<li>You&#x27;re trying to scrape content you don&#x27;t have permission to access</li>\n<li>You need authenticated access (use Microsoft Graph API instead)</li>\n</ul>\n<h2>How Simple Is It?</h2>\n<p>Three steps:</p>\n<ol>\n<li><strong>Get a view-only link</strong> from OneNote Web (Share → View only)</li>\n<li><strong>Create a config file</strong> listing which sections and pages to extract</li>\n<li><strong>Run one command</strong>: <code>node extract.js my-config.json</code></li>\n</ol>\n<p>That&#x27;s it. Your markdown files appear in <code>output/</code>.</p>\n<h2>Why This Exists</h2>\n<p>Microsoft&#x27;s OneNote export tools are... well, let&#x27;s just say they could be better:</p>\n<ul>\n<li>PDF export loses structure and is hard to parse</li>\n<li>HTML export isn&#x27;t available for view-only links</li>\n<li>Graph API requires OAuth setup, app registration, and Microsoft 365 admin permissions (good luck with that)</li>\n</ul>\n<p><strong>This tool works with what you already have:</strong> a view-only link.</p>\n<p>No authentication. No API keys. No begging your IT department for Graph API access.</p>\n<h2>What Problem Did We Solve?</h2>\n<p>OneNote Web is smart about rejecting automation. When scripts try to click sections or pages, OneNote&#x27;s JavaScript checks if the clicks are &quot;trusted&quot; (from a real user) or &quot;untrusted&quot; (from a script). Regular automation gets ignored.</p>\n<p>We use <strong>Playwright&#x27;s native browser automation</strong>, which generates clicks identical to real user actions. OneNote can&#x27;t tell the difference. Problem solved.</p>\n<h2>Installation</h2>\n<pre><code class=\"hljs language-bash\">npm install\nnpx playwright install chromium\n</code></pre>\n<h2>Example Config</h2>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;notebookUrl&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;https://1drv.ms/o/c/your-link-here&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;outputDir&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;./my-notes&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;sections&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Work Notes&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;pages&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;Meeting 2024-01-15&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">&quot;Project Ideas&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">&quot;TODO&quot;</span><span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Personal&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;pages&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;Journal&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">&quot;Reading List&quot;</span><span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<h2>What You Won&#x27;t Get (Yet)</h2>\n<p>Current limitations:</p>\n<ul>\n<li><strong>Images</strong>: Text only (images are skipped)</li>\n<li><strong>Formatting</strong>: No bold, italics, or lists (plain text)</li>\n<li><strong>Auto-discovery</strong>: You have to manually list section and page names</li>\n<li><strong>Speed</strong>: About 2-3 seconds per page (not instant, but reliable)</li>\n</ul>\n<p>We built this to solve one problem well: get text out of OneNote. If you need rich formatting or images, you&#x27;ll want Microsoft&#x27;s official tools or Graph API.</p>\n<h2>Who Should Use This?</h2>\n<p><strong>This is for you if:</strong></p>\n<ul>\n<li>You&#x27;re leaving Microsoft 365 and want your notes</li>\n<li>You have old notebooks to archive as text</li>\n<li>You collaborate on shared notebooks and want your own copy</li>\n<li>You prefer plain text files over proprietary formats</li>\n<li>You want to version control your notes (markdown + git is nice)</li>\n</ul>\n<p><strong>Maybe skip this if:</strong></p>\n<ul>\n<li>You need pixel-perfect formatting</li>\n<li>You want to preserve images and drawings</li>\n<li>You&#x27;re working with authenticated notebooks (not view-only links)</li>\n<li>You&#x27;re perfectly happy in OneNote&#x27;s ecosystem</li>\n</ul>\n<h2>Legal &amp; Ethical</h2>\n<p>This is a <strong>personal data liberation tool</strong>.</p>\n<p><strong>Use it for:</strong></p>\n<ul>\n<li>Your own notebooks</li>\n<li>Shared notebooks you have permission to access</li>\n<li>Content you created or have rights to</li>\n</ul>\n<p><strong>Don&#x27;t use it to:</strong></p>\n<ul>\n<li>Scrape content you don&#x27;t have rights to</li>\n<li>Bypass access controls</li>\n<li>Violate Microsoft&#x27;s Terms of Service</li>\n</ul>\n<p>When in doubt, use Microsoft&#x27;s official export features.</p>\n<h2>Get Started</h2>\n<p>Repository: <a href=\"https://github.com/daniel-butler/onenote-web-extractor\">github.com/daniel-butler/onenote-web-extractor</a></p>\n<pre><code class=\"hljs language-bash\">git <span class=\"hljs-built_in\">clone</span> https://github.com/daniel-butler/onenote-web-extractor\n<span class=\"hljs-built_in\">cd</span> onenote-web-extractor\nnpm install\nnpx playwright install chromium\nnode extract.js example-config.json\n</code></pre>\n<p>Full documentation in the README.</p>\n<h2>What&#x27;s Next</h2>\n<p>Possible improvements (PRs welcome):</p>\n<ul>\n<li>Image extraction</li>\n<li>Auto-discovery of sections/pages (no manual config)</li>\n<li>Markdown formatting (bold, lists, links)</li>\n<li>Parallel extraction (faster)</li>\n<li>Progress bars</li>\n</ul>\n<hr/>\n<p>Your data shouldn&#x27;t be locked in one vendor&#x27;s format. This tool gets you out.</p>",
            "url": "https://daniel-butler.com/articles/onenote-extractor",
            "title": "Get Your Data Out of OneNote (Without Fighting Microsoft's Export Tools)",
            "summary": "Extract OneNote notebooks to markdown in minutes with just a view-only link. No API setup, no OAuth, no fighting with export buttons.",
            "date_modified": "2026-02-24T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/onenote-web-extractor-release",
            "content_html": "<p>I needed to extract content from old OneNote notebooks I had shared as view-only links. Playwright should have made this straightforward: navigate to the notebook, click sections, click pages, extract text. Except the clicks didn&#x27;t work.</p>\n<p>The sections highlighted when clicked. The URL changed. Network requests fired. But the content iframe stayed frozen on the section overview. No matter how long I waited, the page content never loaded.</p>\n<h2>The debugging process</h2>\n<p>I started with the obvious checks. Wait longer between actions. Try different selectors. Click parent elements instead of children. Take screenshots at each step to confirm the browser state matched expectations. Nothing changed the outcome.</p>\n<p>Then I checked the DOM carefully. After clicking a page, the <code>pageNode</code> element had the selected state applied. The browser knew I clicked it. OneNote&#x27;s JavaScript saw the click happen. It just didn&#x27;t respond.</p>\n<p>That narrowed the problem: OneNote was receiving the click event but choosing not to act on it.</p>\n<h2>The isTrusted check</h2>\n<p>Modern web apps can detect synthetic events. When you run <code>element.click()</code> in JavaScript, the browser sets <code>event.isTrusted</code> to <code>false</code>. Real user interactions set it to <code>true</code>. That&#x27;s the signal.</p>\n<p>I was using <code>page.evaluate()</code> to execute clicks inside the browser context:</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// This generates isTrusted: false</span>\n<span class=\"hljs-keyword\">await</span> page.<span class=\"hljs-title function_\">evaluate</span>(<span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&#x27;.pageNode&#x27;</span>).<span class=\"hljs-title function_\">click</span>();\n});\n</code></pre>\n<p>OneNote Web checks <code>isTrusted</code> and ignores synthetic clicks. The event fires, the state updates, but the content load never triggers.</p>\n<h2>The fix</h2>\n<p>Playwright has a different way to click: native browser automation that generates real events with coordinates, timing, and trust markers.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// This generates isTrusted: true</span>\n<span class=\"hljs-keyword\">await</span> page.<span class=\"hljs-title function_\">locator</span>(<span class=\"hljs-string\">&#x27;.pageNode&#x27;</span>).<span class=\"hljs-title function_\">click</span>();\n</code></pre>\n<p>The difference:</p>\n<ul>\n<li><code>evaluate().click()</code> runs JavaScript in the browser</li>\n<li><code>locator().click()</code> uses the browser&#x27;s automation protocol to simulate an actual mouse click</li>\n</ul>\n<p>The second approach generates events that look identical to real user interaction. OneNote Web responds to them.</p>\n<p>Once I switched to native clicks, the content loaded immediately. Pages that had been stuck on the section overview now showed their actual text content.</p>\n<h2>What it does now</h2>\n<p><a href=\"https://github.com/daniel-butler/Onenote-web-extractor\">OneNote Web Extractor</a> takes a JSON config listing sections and pages, navigates through the notebook using native Playwright clicks, waits for content to load in OneNote&#x27;s iframe, and saves the text to markdown files.</p>\n<p><strong>Config format:</strong></p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;notebookUrl&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;https://1drv.ms/o/c/your-notebook-id/...&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;outputDir&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;./output&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;sections&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;My Section&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;pages&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;Page 1&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-string\">&quot;Page 2&quot;</span><span class=\"hljs-punctuation\">]</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p><strong>Run:</strong></p>\n<pre><code class=\"hljs language-bash\">node extract.js config.json\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>output/\n└── my-section/\n    ├── page-1.md\n    └── page-2.md\n</code></pre>\n<p>The extraction is slow—about 2-3 seconds per page—because OneNote&#x27;s iframe loading is asynchronous and there&#x27;s no reliable way to detect when it&#x27;s finished except waiting. But it works consistently.</p>\n<h2>What I learned</h2>\n<p><strong>Always check <code>event.isTrusted</code> when automation fails on modern web apps.</strong> If a click highlights an element but doesn&#x27;t trigger the expected behavior, the app is probably checking whether the event came from a real user.</p>\n<p>Playwright&#x27;s native interactions (<code>locator.click()</code>, <code>locator.type()</code>, etc.) generate trusted events. JavaScript&#x27;s DOM methods (<code>element.click()</code>, <code>element.dispatchEvent()</code>) do not.</p>\n<p>When building automation:</p>\n<ul>\n<li>Start with native Playwright methods</li>\n<li>Only fall back to <code>evaluate()</code> if you need to run custom logic inside the page context</li>\n<li>If clicks mysteriously stop working, suspect an <code>isTrusted</code> check</li>\n</ul>\n<p>The debugging process took hours. The fix was a single line. That&#x27;s how it goes sometimes.</p>\n<h2>Install</h2>\n<pre><code class=\"hljs language-bash\">git <span class=\"hljs-built_in\">clone</span> https://github.com/daniel-butler/Onenote-web-extractor.git\n<span class=\"hljs-built_in\">cd</span> Onenote-web-extractor\nnpm install\nnpx playwright install chromium\n</code></pre>\n<p>Source and docs: <a href=\"https://github.com/daniel-butler/Onenote-web-extractor\">https://github.com/daniel-butler/Onenote-web-extractor</a></p>\n<hr/>\n<p>This was built to extract documentation from old work notebooks for a career timeline blog post. The tool ended up being more interesting than I expected—not because the extraction itself is novel, but because the debugging process revealed how modern web apps distinguish real users from automation.</p>\n<p>When synthetic clicks fail, native clicks succeed. That&#x27;s the whole trick.</p>",
            "url": "https://daniel-butler.com/articles/onenote-web-extractor-release",
            "title": "OneNote Web Extractor: When synthetic clicks fail",
            "summary": "Extract content from OneNote view-only links by using Playwright's native clicks to generate trusted events. Built through systematic debugging of why programmatic clicks stopped working.",
            "date_modified": "2026-02-23T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/sheetmask-initial-release",
            "content_html": "<p>I built <a href=\"https://github.com/daniel-butler/sheetmask\">sheetmask</a> to solve a specific problem: you have a real Excel report full of sensitive data and need a safe test fixture that matches its structure. Not a made-up spreadsheet. Something that looks and behaves like the real thing, without the real names and numbers.</p>\n<p>Most anonymization tools stop at replacing values. Sheetmask reads the file&#x27;s structure first: which sheets exist, what columns are in each, what the data types are, and how numbers relate to each other. That structural map makes the rest possible.</p>\n<h2>The workflow</h2>\n<p>Run <code>analyze</code> on your file:</p>\n<pre><code class=\"hljs language-bash\">sheetmask analyze <span class=\"hljs-string\">&quot;Q4 Finance Report.xlsx&quot;</span>\n</code></pre>\n<p>This prints a structured prompt describing the file&#x27;s sheets, columns, data types, and sample values. It captures which columns are derived (Gross Margin = Revenue - Cost) and which entities repeat across sheets (a manager name appearing in both a summary tab and a detail tab).</p>\n<p>Copy that prompt and paste it into Claude or ChatGPT. The LLM reads the structural analysis and writes a processor config telling sheetmask exactly how to handle each column: what kind of fake value to generate, which numeric columns to vary independently, and which to derive from others so the math stays consistent.</p>\n<p>Save the config the LLM returns, then run <code>process</code>:</p>\n<pre><code class=\"hljs language-bash\">sheetmask process <span class=\"hljs-string\">&quot;Q4 Finance Report.xlsx&quot;</span> --config q4_config.py\n<span class=\"hljs-comment\"># Output: Q4 Finance Report_SYNTHETIC.xlsx</span>\n</code></pre>\n<h2>Why the LLM step is not optional</h2>\n<p>The config maps every column to a rule. Writing it by hand means reading each column, understanding the data type, deciding whether a number is independent or computed, and getting the formulas right across however many sheets the file has.</p>\n<p>The LLM does that work. It reads the sample data and the structure <code>analyze</code> extracted, understands the relationships, and produces a config sheetmask executes directly. You review it, run it, and get a synthetic file with fake names and fake numbers but real structure.</p>\n<p><code>analyze</code> does the structural work. The LLM does the semantic work. Together, they produce output that works as an actual test fixture.</p>\n<h2>Install</h2>\n<pre><code class=\"hljs language-bash\">pip install git+https://github.com/daniel-butler/sheetmask.git\n</code></pre>\n<pre><code class=\"hljs language-bash\">uv add git+https://github.com/daniel-butler/sheetmask.git\n</code></pre>\n<p>Source and docs: <a href=\"https://github.com/daniel-butler/sheetmask\">https://github.com/daniel-butler/sheetmask</a></p>",
            "url": "https://daniel-butler.com/articles/sheetmask-initial-release",
            "title": "Sheetmask released!",
            "summary": "Sheetmask anonymizes your data and keeps relationships intact. It is great for PnLs and other financial data where the structure matters.",
            "date_modified": "2026-02-20T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/you-try-it",
            "content_html": "<blockquote>\n<p>you try it</p>\n</blockquote>\n<p>yes. really. that&#x27;s the whole prompt that can change your entire relationship with llms/ai.\nit&#x27;s absolutely magical the first time you see it.</p>\n<p>the biggest thing is you have to do this from a local agent environment like Claude Code, Cowork, codex, etc.</p>\n<p>try it and let me know what you think.</p>",
            "url": "https://daniel-butler.com/articles/you-try-it",
            "title": "The prompt everyone should know",
            "summary": "it's so simple you should try it!",
            "date_modified": "2026-02-20T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/caches-mental-model",
            "content_html": "<p>Caches are like trash cans.\nWhen throwing out trash it goes in the closest bin.\nWe don&#x27;t walk to the trash can in the garage or outside everytime.\nWe collect it in different sized bins around the house.</p>\n<p>Read through caches are when the closest can is overflowing.\nIt goes in the larger one in the kitchen.</p>\n<p>Cache time to live (TTL) is trash days.\nThe trash is &quot;expired&quot; and it has to leave.</p>",
            "url": "https://daniel-butler.com/articles/caches-mental-model",
            "title": "Caching Mental Model",
            "summary": "A way to think about caching in computer science",
            "date_modified": "2025-10-29T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/aws-outage-2025-10",
            "content_html": "<blockquote>\n<p>The opinions and information expressed in this post, and every other one, are my own and in no way reflect the opinion of my employer, Amazon.</p>\n</blockquote>\n<p>A lot has been discussed about AWS’s DynamoDB outage already. If you haven’t read it, yet I suggest spending a few minutes to go through it. The best lessons are from the scars of others!</p>\n<p><a href=\"https://aws.amazon.com/message/101925/\">https://aws.amazon.com/message/101925/</a></p>\n<p>There is already a lot on the DNS delegators and how they failed. What I found interesting from reading between the lines was the Network Load Balancer (NLB) failure. AWS has another type of load balancer, Application load balancers (ALB). The ALBs weren’t impacted, why?</p>\n<p>The answer basically comes down to a case of real world flapping. This is the NLB quote from the report.</p>\n<blockquote>\n<p>During the event the NLB health checking subsystem began to experience increased health check failures. This was caused by the health checking subsystem bringing new EC2 instances into service while the network state for those instances had not yet fully propagated. This meant that in some cases health checks would fail even though the underlying NLB node and backend targets were healthy. This resulted in health checks alternating between failing and healthy. This caused NLB nodes and backend targets to be removed from DNS, only to be returned to service when the next health check succeeded.</p>\n</blockquote>\n<p>The likely cause is Network Load Balancers passive health checks - Application Load Balancers don&#x27;t have them.  Active health checks are calls to endpoint like <code>/health</code> while passive health checks monitor actual connections.</p>\n<blockquote>\n<p>With passive health checks, the load balancer observes how targets respond to connections. Passive health checks enable the load balancer to detect an unhealthy target before it is reported as unhealthy by the active health checks. You cannot disable, configure, or monitor passive health checks. Passive health checks are not supported for UDP traffic, and target groups with stickiness turned on.</p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/network/target-group-health-checks.html\">Documentation Link</a></li>\n</ul>\n</blockquote>\n<p>The key point is passive health checks watch the actual traffic. There is no slack for errors.  Some requests worked while others didn&#x27;t causing the targets to flap (<code>fail</code> -&gt; <code>succeed</code> -<code>fail</code> -&gt; <code>succeed</code> -&gt; etc).</p>\n<p>It’s one of those hard lessons of why you don’t necessary want instantaneous feedback. Quick feedback is good but overwhelming feedback becomes noise or worse.</p>\n<p>I’m an outsider looking in, it seems like the biggest mismatch is the resource server wasn’t protected from its clients. Generally throttling is how that protection is implemented.</p>\n<h3>Bonus</h3>\n<p>Below is a visual representation of the failures and the cascading effect it had. The team I am on was impacted after the NLB failures were resolved.</p>\n<pre class=\"mermaid\">gantt\n      title AWS US-EAST-1 Outage - Service Impact Timeline (14.5 hours)\n      dateFormat YYYY-MM-DD HH:mm\n\n      section Root Cause\n      DynamoDB DNS Failure           :crit, 2025-10-19 23:48, 2025-10-20 02:40\n\n      section Lambda\n      Lambda Wave 1 (DynamoDB)       :w1lambda, 2025-10-19 23:51, 2025-10-20 02:24\n      Lambda SQS Polling Issue       :active, 2025-10-20 02:24, 2025-10-20 06:00\n      Lambda Wave 2 (NLB)            :done, 2025-10-20 07:04, 2025-10-20 14:15\n\n      section Connect\n      Connect Wave 1 (DynamoDB)      :w1connect, 2025-10-19 23:56, 2025-10-20 05:00\n      Connect Wave 2 (NLB)           :done, 2025-10-20 07:04, 2025-10-20 13:20\n\n      section EC2 Cascade\n      EC2 DWFM Failures             :active, 2025-10-19 23:48, 2025-10-20 05:28\n      EC2 Network State Issues      :active, 2025-10-20 05:28, 2025-10-20 10:36\n      EC2 Throttling Recovery       :active, 2025-10-20 10:36, 2025-10-20 13:50\n\n      section NLB Cascade\n      NLB Connection Errors         :done, 2025-10-20 05:30, 2025-10-20 14:09\n\n      section Other Services\n      STS Wave 1 (DynamoDB)          :w1other, 2025-10-19 23:51, 2025-10-20 01:19\n      STS Wave 2 (NLB)               :done, 2025-10-20 08:31, 2025-10-20 09:59\n      Console Auth (DynamoDB)        :w1other, 2025-10-19 23:51, 2025-10-20 01:25\n      Redshift Query Failures (DDB)  :w1other, 2025-10-19 23:47, 2025-10-20 02:21\n      Redshift Cluster Impairment (EC2) :active, 2025-10-20 02:21, 2025-10-21 04:05\n      ECS EKS Fargate (EC2)          :w1other, 2025-10-19 23:45, 2025-10-20 14:20\n</pre>",
            "url": "https://daniel-butler.com/articles/aws-outage-2025-10",
            "title": "AWS Outage - Network Load Balancer Take",
            "summary": "Flapping in the wild.",
            "date_modified": "2025-10-27T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/ai-buddy-mental-modal",
            "content_html": "<blockquote>\n<p>my mental model for AI coding assistants is an <em>incredibly</em> well-read junior engineer with questionable taste, unlimited enthusiasm, no ego, ADHD, and a traumatic brain injury that causes pretty serious memory issues. If they write something down, they&#x27;re good. They&#x27;ve developed all sorts of wild coping strategies that are far more effective than they have any right to be. They generally have no spine and back down way too fast when you question something they&#x27;re doing...even if they&#x27;re right. They&#x27;re prone to distraction. Again, getting them to write down what they&#x27;re supposed to be doing can help a ton.</p>\n<ul>\n<li>Jesse <a href=\"https://blog.fsck.com/2025/05/22/that-was-easy--a-keyboard-for-vibecoding/\">https://blog.fsck.com/2025/05/22/that-was-easy--a-keyboard-for-vibecoding/</a></li>\n</ul>\n</blockquote>",
            "url": "https://daniel-butler.com/articles/ai-buddy-mental-modal",
            "title": "AI Assistants Mental Model",
            "summary": "A surprisingly accurate and funny take on AI models",
            "date_modified": "2025-10-26T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/rust-dyn-traits-example",
            "content_html": "<h2>Overview</h2>\n<p>The example comes from the prompt below in the <a href=\"https://doc.rust-lang.org/book/ch17-03-oo-design-patterns.html\">rust book&#x27;s chapter 17 section 3</a>.</p>\n<blockquote>\n<p>To see the simplicity of maintaining code that uses the state pattern, try a few of these suggestions:</p>\n<ul>\n<li>Add a <code>reject</code> method that changes the post’s state from <code>PendingReview</code> back to <code>Draft</code>.</li>\n<li>Require two calls to <code>approve</code> before the state can be changed to <code>Published</code>.</li>\n<li>Allow users to add text content only when a post is in the <code>Draft</code> state. Hint: have the state object responsible for what might change about the content but not responsible for modifying the <code>Post</code>.</li>\n</ul>\n</blockquote>\n<h3>Result</h3>\n<p>Below is the code I wrote to solve the three challenges above. I struggled with getting the value for the <code>Optional&lt;Box&lt;...&gt;&gt;</code>. I&#x27;m starting to grasp that it all goes back to the types when working with rust. Types are not as big of a deal in Python, so that is taking some getting used to.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> blog::Post;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">post</span> = Post::<span class=\"hljs-title function_ invoke__\">new</span>();\n\n    post.<span class=\"hljs-title function_ invoke__\">add_text</span>(<span class=\"hljs-string\">&quot;I ate a salad for lunch today&quot;</span>);\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\n    post.<span class=\"hljs-title function_ invoke__\">request_review</span>();\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">reject</span>();\n\t<span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">request_review</span>();\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">approve</span>();\n\tpost.<span class=\"hljs-title function_ invoke__\">approve</span>();\n\t<span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;I ate a salad for lunch today&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n}\n\n\n<span class=\"hljs-keyword\">mod</span> blog {\n\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Post</span> {\n\t\tstate: <span class=\"hljs-type\">Option</span>&lt;<span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;&gt;,\n\t\tcontent: <span class=\"hljs-type\">String</span>,\n\t}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">Post</span> {\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> Post {\n\t\t\tPost {\n\t\t\t\tstate: <span class=\"hljs-title function_ invoke__\">Some</span>(<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Draft {})),\n\t\t\t\tcontent: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>(),\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>() {\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Can add content: {}&quot;</span>, s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>());\n\t\t\t\n\t\t\t\t<span class=\"hljs-keyword\">if</span> s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>() {\n\t\t\t\t\t<span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-type\">str</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">content</span> = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>().<span class=\"hljs-title function_ invoke__\">unwrap</span>().<span class=\"hljs-title function_ invoke__\">content</span>(<span class=\"hljs-keyword\">self</span>);\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;content: {}&quot;</span>, content);\n\t\t\tcontent\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">request_review</span>())\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">approve</span>());\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">reject</span>());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">trait</span> <span class=\"hljs-title class_\">State</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, _post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n\t\t \t<span class=\"hljs-string\">&quot;&quot;</span>\n\t\t }\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">can_add_content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t\t\t<span class=\"hljs-literal\">false</span>\n\t\t}\n\t}\n\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Draft</span> {}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Draft</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(PendingReview::<span class=\"hljs-title function_ invoke__\">new</span>())\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">can_add_content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t\t\t<span class=\"hljs-literal\">true</span>\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\treviews: <span class=\"hljs-type\">i8</span>\n\t}\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> PendingReview {\n\t\t\tPendingReview { reviews: <span class=\"hljs-number\">0</span> }\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">self</span>.reviews += <span class=\"hljs-number\">1</span>;\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">get_reviews</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">i8</span> {\n\t\t\t<span class=\"hljs-keyword\">self</span>.reviews\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">state</span> = PendingReview::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\tstate.<span class=\"hljs-title function_ invoke__\">add_review</span>();\n\t\t\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">as_ref</span>().<span class=\"hljs-title function_ invoke__\">get_reviews</span>() == <span class=\"hljs-number\">0</span> {\n\t\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(state)\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Published {})\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Draft {})\n\t\t }\n\t}\n\t\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Published</span> {}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Published</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t }\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t }\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n\t\t\t&amp;post.content\n\t\t}\n\t}\n}\n</code></pre>\n<h2>Refinement</h2>\n<p>Now, what can be learned from asking ChatGPT?</p>\n<p>Open AI&#x27;s ChatGPT prompt.</p>\n<pre><code>Refactor this code to be more performant.\n</code></pre>\n<h3>Response</h3>\n<p>One possible way to make the code more performant is to avoid unnecessary allocations and cloning of data. One such example is in the <code>content()</code> method of the <code>State</code> trait, where the content is cloned unnecessarily.</p>\n<ol>\n<li>Instead, we can use a reference to the existing content to avoid the clone:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n    &amp;post.content\n}\n</code></pre>\n<ol start=\"2\">\n<li>Similarly, in the <code>add_text()</code> method of the <code>Post</code> struct, we can use a reference to the text to avoid the allocation and copying of the string:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>() {\n        <span class=\"hljs-keyword\">if</span> s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>() {\n            <span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n        }\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>We can also avoid unnecessary boxing and dynamic dispatch by using an enum instead of a trait object for the state of the post. This can simplify the code and make it more efficient:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">mod</span> blog {\n    <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Post</span> {\n        state: State,\n        content: <span class=\"hljs-type\">String</span>,\n    }\n\n    <span class=\"hljs-meta\">#[derive(Debug)]</span>\n    <span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">State</span> {\n        Draft { can_add_content: <span class=\"hljs-type\">bool</span> },\n        PendingReview { reviews: <span class=\"hljs-type\">i8</span> },\n        Published,\n    }\n\n    <span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">Post</span> {\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> Post {\n            Post {\n                state: State::Draft { can_add_content: <span class=\"hljs-literal\">true</span> },\n                content: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>(),\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Draft { can_add_content: <span class=\"hljs-literal\">true</span> } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-type\">str</span> {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Published = <span class=\"hljs-keyword\">self</span>.state {\n                &amp;<span class=\"hljs-keyword\">self</span>.content\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-string\">&quot;&quot;</span>\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Draft { .. } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.state = State::PendingReview { reviews: <span class=\"hljs-number\">0</span> };\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::PendingReview { reviews } = &amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>.state {\n                *reviews += <span class=\"hljs-number\">1</span>;\n                <span class=\"hljs-keyword\">if</span> *reviews &gt;= <span class=\"hljs-number\">2</span> {\n                    <span class=\"hljs-keyword\">self</span>.state = State::Published;\n                }\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::PendingReview { .. } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.state = State::Draft { can_add_content: <span class=\"hljs-literal\">true</span> };\n            }\n        }\n    }\n}\n</code></pre>\n<p>With these changes, the code should be more efficient and performant.</p>\n<h2>Summary</h2>\n<p>For the first two points, as best I can tell, it is already happening. And the last point is fair and even called out in the rusty book. We used <code>Box</code>s to show how they work with <code>dyn trait</code>s. Overall because I didn&#x27;t come up with a majority of the code it didn&#x27;t leave a lot of room for ChatGPT to fix it.</p>",
            "url": "https://daniel-butler.com/articles/rust-dyn-traits-example",
            "title": "Rust Book Dynamic Traits Example",
            "summary": "Expanding on the example in Rust Book's chapter 17 section 3. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-05-05T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/reading-list",
            "content_html": "<h1>Overview</h1>\n<p>List of articles I&#x27;ve found helpful, insightful, and want to remember.</p>\n<h2>List</h2>\n<ul>\n<li><a href=\"https://www.scattered-thoughts.net/writing/reflections-on-a-decade-of-coding\">https://www.scattered-thoughts.net/writing/reflections-on-a-decade-of-coding</a></li>\n<li><a href=\"https://skamille.medium.com/an-incomplete-list-of-skills-senior-engineers-need-beyond-coding-8ed4a521b29f\">https://skamille.medium.com/an-incomplete-list-of-skills-senior-engineers-need-beyond-coding-8ed4a521b29f</a></li>\n</ul>",
            "url": "https://daniel-butler.com/articles/reading-list",
            "title": "Good Reads",
            "summary": "Collection of articles",
            "date_modified": "2023-03-17T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/hr-application",
            "content_html": "<h1>Overview</h1>\n<p>This is <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">the third example problem</a> from the rust book. As before there will be a python example then the Rust example.</p>\n<h2>Problem Statement</h2>\n<p>Using a hash map and vectors, create a text interface to allow a user to add employee names to a department in a company. For example, “Add Sally to Engineering” or “Add Amir to Sales.” Then let the user retrieve a list of all people in a department or all people in the company by department, sorted alphabetically.</p>\n<h3>Input</h3>\n<pre><code>Add Sally to Engineering\nAdd Amir to Sales\nAdd Juan to Accounting\nAdd George to HR\nAdd Eric to Sales\nAdd Sam to Engineering\nAdd Cole to Engineering\nList Employees\nList Sales\nList Engineering\nList HR\n</code></pre>\n<h2>Python</h2>\n<p>This uses a simple while loop and stores the data in a dictionary by department which is flattened with a simple list comprehension.</p>\n<pre><code class=\"hljs language-python\">employees = {}\nrepeat = <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">company</span>(<span class=\"hljs-params\">command</span>):\n\tcommand_words = command.split(<span class=\"hljs-string\">&quot; &quot;</span>)\n\tcmd = command_words[<span class=\"hljs-number\">0</span>].lower()\n\t<span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;add&quot;</span>:\n\t\tname = command_words[<span class=\"hljs-number\">1</span>]\n\t\tdepartment = command_words[<span class=\"hljs-number\">3</span>].lower()\n\t\temp_department = employees.get(department, [])\n\t\temp_department.append(name)\n\t\temployees[department] = emp_department\n\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Added <span class=\"hljs-subst\">{name}</span> to <span class=\"hljs-subst\">{department}</span>!&quot;</span>)\n\t<span class=\"hljs-keyword\">elif</span> cmd == <span class=\"hljs-string\">&quot;list&quot;</span>:\n\t\tlist_type = command_words[<span class=\"hljs-number\">1</span>].lower()\n\t\t<span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span>:\n\t\t\temps = [\n\t\t\t\temp\n\t\t\t\t<span class=\"hljs-keyword\">for</span> emps_dep <span class=\"hljs-keyword\">in</span> employees.values()\n\t\t\t\t<span class=\"hljs-keyword\">for</span> emp <span class=\"hljs-keyword\">in</span> emps_dep\n\t\t\t]\n\t\t\temps.sort()\n\t\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Employees: <span class=\"hljs-subst\">{emps}</span>&quot;</span>)\n\t\t<span class=\"hljs-keyword\">else</span>:\n\t\t\temps = employees.get(list_type, [])\n\t\t\temps.sort()\n\t\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Employees in Department <span class=\"hljs-subst\">{list_type}</span>: <span class=\"hljs-subst\">{emps}</span>&quot;</span>)\n\t<span class=\"hljs-keyword\">elif</span> cmd <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\">&quot;exit&quot;</span>, <span class=\"hljs-string\">&quot;quit&quot;</span>]:\n\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Exiting...&quot;</span>)\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n\t\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.\\n============================\\n&quot;</span>)\n\n<span class=\"hljs-keyword\">while</span> repeat:\n\tcommand = <span class=\"hljs-built_in\">input</span>()\n\trepeat = company(command)\n\t\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\n\nAdd Sally to Engineering\nAdded Sally to engineering!\nAdd Amir to Sales\nAdded Amir to sales!\nAdd Juan to Accounting\nAdded Juan to accounting!\nAdd George to HR\nAdded George to hr!\nAdd Eric to Sales\nAdded Eric to sales!\nAdd Sam to Engineering\nAdded Sam to engineering!\nAdd Cole to Engineering\nAdded Cole to engineering!\nlist employees \nEmployees: [&#x27;Amir&#x27;, &#x27;Cole&#x27;, &#x27;Eric&#x27;, &#x27;George&#x27;, &#x27;Juan&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]\nlist sales\nEmployees in Department sales: [&#x27;Amir&#x27;, &#x27;Eric&#x27;]\nlist engineering\nEmployees in Department engineering: [&#x27;Cole&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]\nlist hr \nEmployees in Department hr: [&#x27;George&#x27;]\nexit\nExiting...\n</code></pre>\n<h2>Rust</h2>\n<p>This is my original rust solution. The solution takes advantage of the lessons learned from the median and mode refactoring by using entries when modifying <code>HashMap</code>s. When running into issues about typing being off or the size not being known at compile time, the errors made more sense. The stack vs. the heap is an integral concept that is never touched on in python.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n<span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">employees_real</span>: HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">repeat</span> = <span class=\"hljs-literal\">true</span>;\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;============================&quot;</span>);\n\t\n\t<span class=\"hljs-keyword\">while</span> repeat {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Invalid input!&quot;</span>);\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Input: {}&quot;</span>, input);\n\t\trepeat = <span class=\"hljs-title function_ invoke__\">record_employee</span>(&amp;input, &amp;<span class=\"hljs-keyword\">mut</span> employees_real);\n\t}\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">String</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">map</span>(<span class=\"hljs-type\">String</span>::from).<span class=\"hljs-title function_ invoke__\">collect</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\n\t<span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;add&quot;</span> {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n\t\temployees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;list&quot;</span> {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t\n\t\t<span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\t<span class=\"hljs-keyword\">for</span> (_dept, dept_emps) <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">iter</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">emp</span> <span class=\"hljs-keyword\">in</span> dept_emps.<span class=\"hljs-title function_ invoke__\">into_iter</span>() {\n\t\t\t\t\temps.<span class=\"hljs-title function_ invoke__\">push</span>(emp);\n\t\t\t\t}\n\t\t\t}\n\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">nut</span> emps = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type).<span class=\"hljs-title function_ invoke__\">cloned</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>();\n\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t\t}\n\t} <span class=\"hljs-keyword\">else</span> {\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\nInput: Add Sally to Engineering\nAdded Sally to engineering\nInput: Add Amir to Sales\nAdded Amir to sales\nInput: Add Juan to Accounting\nAdded Juan to accounting\nInput: Add George to HR\nAdded George to hr\nInput: Add Eric to Sales\nAdded Eric to sales\nInput: Add Sam to Engineering\nAdded Sam to engineering\nInput: Add Cole to Engineering\nAdded Cole to engineering\nInput: List Employees\nEmployees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List Sales\nEmployees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]\nInput: List Engineering\nEmployees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List HR\nEmployees in Department hr: [&quot;George&quot;]\nInput: Exit\nExiting...\n</code></pre>\n<p>Looks good!!</p>\n<h3>Challenges</h3>\n<p>The major hurdle when creating the solution above was how to split the input by whitespace into a vector of strings.  I asked ChatGPT for some help...</p>\n<blockquote>\n<p>How can this error be fixed?</p>\n</blockquote>\n<pre><code>a value of type `Vec&lt;&amp;String&gt;` cannot be built from an iterator over elements of type `&amp;str`\n</code></pre>\n<blockquote>\n<p>the error comes from this line of rust code:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;&amp;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n</code></pre>\n<p>The response which was very helpful.</p>\n<blockquote>\n<p>The error message suggests that the <code>split_whitespace()</code> method is returning an iterator over <code>&amp;str</code> values, but you are trying to collect them into a <code>Vec&lt;&amp;String&gt;</code>, which expects references to <code>String</code> values.\nTo fix this error, you can either change the type of <code>command_words</code> to <code>Vec&lt;&amp;str&gt;</code>:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\">`<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;&amp;<span class=\"hljs-type\">str</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();`\n</code></pre>\n<blockquote>\n<p>Or you can change the type of the elements in the <code>Vec</code> to <code>String</code> instead of <code>&amp;String</code>:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">map</span>(<span class=\"hljs-type\">String</span>::from).<span class=\"hljs-title function_ invoke__\">collect</span>();`\n</code></pre>\n<blockquote>\n<p>The <code>map()</code> method is used to transform each <code>&amp;str</code> value into a <code>String</code> value.</p>\n</blockquote>\n<h2>Refactoring</h2>\n<p>Now time for the refactoring!! I asked how the code above could be more idiomatic. Here was the response.</p>\n<blockquote>\n<p>Here are some suggestions to make the Rust code more idiomatic:</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>Use pattern matching instead of if/else statements:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n    <span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n        <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n        employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n        <span class=\"hljs-literal\">true</span>\n    }\n    <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n        <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n            <span class=\"hljs-keyword\">for</span> (_dept, dept_emps) <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">iter</span>() {\n                emps.<span class=\"hljs-title function_ invoke__\">extend</span>(dept_emps);\n            }\n            emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n            <span class=\"hljs-literal\">true</span>\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type).<span class=\"hljs-title function_ invoke__\">cloned</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>();\n            emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n            <span class=\"hljs-literal\">true</span>\n        }\n    }\n    _ =&gt; {\n        <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n        <span class=\"hljs-literal\">false</span>\n    }\n}\n</code></pre>\n<blockquote>\n<ol start=\"2\">\n<li>Use <code>if let</code> instead of <code>unwrap_or_default</code>:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n    emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n} <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n}\n<span class=\"hljs-literal\">true</span>\n</code></pre>\n<blockquote>\n<ol start=\"3\">\n<li>Use <code>flatten</code> instead of nested loops:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n<span class=\"hljs-literal\">true</span>\n\n</code></pre>\n<blockquote>\n<ol start=\"4\">\n<li>Use <code>&amp;str</code> instead of <code>String</code> when possible:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">str</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;_&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n    <span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n        <span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n            employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n            <span class=\"hljs-literal\">true</span>\n        }\n        <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n            <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n                <span class=\"hljs-literal\">true</span>\n            } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n                emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n                <span class=\"hljs-literal\">true</span>\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n                <span class=\"hljs-literal\">true</span>\n            }\n        }\n        _ =&gt; {\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n            <span class=\"hljs-literal\">false</span>\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<ol start=\"5\">\n<li>Use <code>let mut</code> only when necessary:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">dept_emps</span> <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">values</span>() {\n    emps.<span class=\"hljs-title function_ invoke__\">extend</span>(dept_emps);\n}\nemps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n<span class=\"hljs-literal\">true</span>\n</code></pre>\n<p>Since it is broken into a few sections. I&#x27;ve put it all into a working code block below with the exception of point #5 because it conflicts with the flatten method #3. Flatten makes more sense to me. It is debatable that #5 is a clearer way to express the logic.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n<span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">employees_real</span>: HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">repeat</span> = <span class=\"hljs-literal\">true</span>;\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;============================&quot;</span>);\n\t\n\t<span class=\"hljs-keyword\">while</span> repeat {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Invalid input!&quot;</span>);\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Input: {}&quot;</span>, input);\n\t\trepeat = <span class=\"hljs-title function_ invoke__\">record_employee</span>(&amp;input, &amp;<span class=\"hljs-keyword\">mut</span> employees_real);\n\t}\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">String</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;_&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\n\t<span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n\t\t\n\t\t<span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n\t\t    employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n\t\t    <span class=\"hljs-literal\">true</span>\n\t    }\n\t\t\n\t    <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t\n\t\t    <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n\t\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n\t\t\t    emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n\t\t    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n\t\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n\t\t\t}\n\t\t\t<span class=\"hljs-literal\">true</span>\n\t    }\n\t\t\n\t    _ =&gt; {\n\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n\t\t    <span class=\"hljs-literal\">false</span>\n\t    }\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\nInput: Add Sally to Engineering\nAdded Sally to engineering\nInput: Add Amir to Sales\nAdded Amir to sales\nInput: Add Juan to Accounting\nAdded Juan to accounting\nInput: Add George to HR\nAdded George to hr\nInput: Add Eric to Sales\nAdded Eric to sales\nInput: Add Sam to Engineering\nAdded Sam to engineering\nInput: Add Cole to Engineering\nAdded Cole to engineering\nInput: List Employees\nEmployees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List Sales\nEmployees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]\nInput: List Engineering\nEmployees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List HR\nEmployees in Department hr: [&quot;George&quot;]\nInput: Exit\nExiting...\n</code></pre>\n<p>Overall I&#x27;m impressed with the result. I think it helped show how to use the <code>collect::&lt;T&gt;()</code> method to convert types and how to use <code>if let</code> idiomatically.</p>",
            "url": "https://daniel-butler.com/articles/hr-application",
            "title": "Rust HR Example Question",
            "summary": "Rust Book example and solution to the HR application exercise.",
            "date_modified": "2023-03-08T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/median-and-mode-rust",
            "content_html": "<p>This is the second example I&#x27;m working on from the <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">rust book</a>.</p>\n<p>In python, I&#x27;ve used the statistics standard library module as the test case to validate the code written in the &quot;brute force method&quot;. If this was production code, I would use the statistics module instead of rolling my own.</p>\n<h2>Problem Statement</h2>\n<p>Given a list of integers, use a vector and return the median (when sorted, the value in the middle position) and mode (the value that occurs most often; a hash map will be helpful here) of the list.</p>\n<h3>Input</h3>\n<pre><code>[13, 8, 2, 21, 21, 6, 27, 15, 14, 22, 17, 16, 7, 15, 12, 10, 25, 21, 27, 29, 17, 29, 26, 10, 14, 11, 23, 8, 27, 4]\n</code></pre>\n<h1>Median</h1>\n<p>What we are looking for is when sorted, the value in the middle position of an array of numbers. When there are an even number of values in the array then find the middle value between the two middle entries.</p>\n<h2>Python</h2>\n<pre><code class=\"hljs language-python\">nums = [\n\t\t<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>\n]\n\nnums = <span class=\"hljs-built_in\">sorted</span>(nums)\n\n<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(nums) % <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">1</span>:\n\tmedian = nums[<span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">len</span>(nums)/<span class=\"hljs-number\">2</span>)]\n<span class=\"hljs-keyword\">else</span>:\n\tmiddle_index = <span class=\"hljs-built_in\">len</span>(nums) / <span class=\"hljs-number\">2</span>\n\tfirst_index = <span class=\"hljs-built_in\">int</span>(middle_index - <span class=\"hljs-number\">.5</span>)\n\tsecond_index = <span class=\"hljs-built_in\">int</span>(middle_index + <span class=\"hljs-number\">.5</span>)\n\tmedian = (nums[first_index]+nums[second_index])/<span class=\"hljs-number\">2</span>\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Median Brute method: <span class=\"hljs-subst\">{median}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">import</span> statistics\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Median Standard library method: <span class=\"hljs-subst\">{statistics.median(nums)}</span>&quot;</span>)\n</code></pre>\n<p>Output</p>\n<pre><code>Median Brute method: 15.5\nMedian Standard library method: 15.5\n</code></pre>\n<h2>Rust</h2>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>];\n\n\tnums.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t<span class=\"hljs-built_in\">print!</span>(<span class=\"hljs-string\">&quot;Median: {}&quot;</span>, <span class=\"hljs-title function_ invoke__\">median</span>(&amp;nums))\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">median</span>(nums: &amp;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">f32</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">length</span>: <span class=\"hljs-type\">f32</span>= nums.<span class=\"hljs-title function_ invoke__\">len</span>() <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>;\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">middle_index</span>: <span class=\"hljs-type\">f32</span> = length / <span class=\"hljs-number\">2</span>.;\n\t\n\t<span class=\"hljs-keyword\">match</span> nums.<span class=\"hljs-title function_ invoke__\">len</span>() % <span class=\"hljs-number\">2</span> {\n\t\t<span class=\"hljs-number\">0</span> =&gt; {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">first</span>= nums[(middle_index - <span class=\"hljs-number\">0.5</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>];\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">second</span> = nums[(middle_index + <span class=\"hljs-number\">0.5</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>];\n\t\t\t<span class=\"hljs-title function_ invoke__\">return</span> (first <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span> + second <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>) / <span class=\"hljs-number\">2</span>.\n\t\t}\n\t\t_ =&gt; {\n\t\t\t<span class=\"hljs-keyword\">return</span> nums[middle_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>] <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>\n\t\t}\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Median: 15.5\n</code></pre>\n<h2>Challenges</h2>\n<p>Not understanding Scope and types being returned. My solution was to put the logic into its own function.</p>\n<pre><code>error[E0425]: cannot find value `median` in this scope\n  --&gt; compiler.rs:21:23\n   |\n21 |     print!(&quot;Median: {}&quot;, median)\n   |                          ^^^^^^ not found in this scope\n</code></pre>\n<p>Numbers are not all the same type. I solved it by casting the numbers into the proper type. Sometimes casting the numbers twice because <code>f32</code> can&#x27;t be cast into <code>usize</code> type. <a href=\"https://stackoverflow.com/a/44552464/7838574\">This stack overflow</a> helped get me to the solution.</p>\n<pre><code>error[E0277]: cannot subtract `{float}` from `usize`\n  --&gt; compiler.rs:12:34\n   |\n12 |             let first = nums[middle_index - 0.5];\n   |                                           ^ no implementation for `usize - {float}`\n</code></pre>\n<h1>Mode</h1>\n<h2>Python</h2>\n<pre><code class=\"hljs language-python\">nums = [\n\t\t<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>\n]\n\ncount_dict = {}\n<span class=\"hljs-keyword\">for</span> num <span class=\"hljs-keyword\">in</span> nums:\n\tcount_dict[num] = count_dict.get(num, <span class=\"hljs-number\">0</span>) + <span class=\"hljs-number\">1</span>\n\t\nmode_dict = {}\nhighest = <span class=\"hljs-number\">0</span>\n<span class=\"hljs-keyword\">for</span> key, value <span class=\"hljs-keyword\">in</span> count_dict.items():\n\tval_list = mode_dict.get(value, [])\n\tval_list.append(key)\n\tmode_dict[value] = val_list\n\t<span class=\"hljs-keyword\">if</span> value &gt; highest:\n\t\thighest = value\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Mode Brute force method: <span class=\"hljs-subst\">{mode_dict[highest]}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">import</span> statistics\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Mode Standard library method: <span class=\"hljs-subst\">{statistics.mode(nums)}</span>&quot;</span>)\n</code></pre>\n<p>Output</p>\n<pre><code>Mode Brute force method: [21, 27]\n\nstatistics.StatisticsError: no unique mode; found 2 equally common values\n</code></pre>\n<p>The statistics standard library throws an error because there are two most common values.</p>\n<h2>Rust</h2>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>];\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Mode: {:?}&quot;</span>, <span class=\"hljs-title function_ invoke__\">mode</span>(&amp;nums));\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">mode</span>(nums: &amp;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt; {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">counter</span> = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\n\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-keyword\">in</span> nums {\n\t\t<span class=\"hljs-keyword\">match</span> counter.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;num) {\n\t\t\t<span class=\"hljs-title function_ invoke__\">Some</span>(count) =&gt; counter.<span class=\"hljs-title function_ invoke__\">insert</span>(num, count + <span class=\"hljs-number\">1</span>),\n\t\t\t<span class=\"hljs-literal\">None</span> =&gt; counter.<span class=\"hljs-title function_ invoke__\">insert</span>(num, <span class=\"hljs-number\">1</span>)\n\t\t};\n\t}\n\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">moder</span>: HashMap&lt;<span class=\"hljs-type\">u32</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">highest</span> = <span class=\"hljs-number\">0</span>;\n\t<span class=\"hljs-keyword\">for</span> (key, value) <span class=\"hljs-keyword\">in</span> &amp;counter {\n\t\t<span class=\"hljs-keyword\">if</span> value &gt; &amp;highest {\n\t\t\thighest = *value;\n\t\t}\n\t\t<span class=\"hljs-keyword\">match</span> moder.<span class=\"hljs-title function_ invoke__\">get_mut</span>(&amp;value) {\n\t\t\t<span class=\"hljs-title function_ invoke__\">Some</span>(keys) =&gt; {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">ks</span> = keys.<span class=\"hljs-title function_ invoke__\">to_vec</span>();\n\t\t\t\tks.<span class=\"hljs-title function_ invoke__\">push</span>(**key);\n\t\t\t\tmoder.<span class=\"hljs-title function_ invoke__\">insert</span>(*value, ks);\n\t\t\t},\n\t\t\t<span class=\"hljs-literal\">None</span> =&gt; {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">keys</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\t\tkeys.<span class=\"hljs-title function_ invoke__\">push</span>(**key);\n\t\t\t\tmoder.<span class=\"hljs-title function_ invoke__\">insert</span>(*value, keys);\n\t\t\t}\n\t\t};\n\t}\n\t\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(keys) = moder.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;highest) {\n\t\t<span class=\"hljs-keyword\">return</span> keys.<span class=\"hljs-title function_ invoke__\">to_vec</span>()\n\t} <span class=\"hljs-keyword\">else</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>()\n\t};\n}\n</code></pre>\n<p>When I asked ChatGPT how I can make the code more idiomatic. This was the response</p>\n<blockquote>\n<p>Here are some suggestions to make the Rust code more idiomatic:</p>\n<ol>\n<li>Use a <code>&amp;[u32]</code> slice instead of a <code>Vec&lt;u32&gt;</code> for the function parameters. This allows the function to accept both a <code>Vec&lt;u32&gt;</code> and a slice, which is more flexible.</li>\n<li>Use <code>unwrap_or</code> instead of the <code>match</code> statement in the <code>mode</code> function to insert a value into the hash map with a default value of 1 if the key does not exist.</li>\n<li>Use <code>entry</code> method to insert or update values in the hash map.</li>\n<li>Use <code>iter()</code> method instead of a reference to iterate over the vector elements.</li>\n<li>Use <code>collect</code> method to convert an iterator to a vector.</li>\n<li>Use <code>copied</code> method to create an iterator over the copied elements.</li>\n<li>Use <code>cloned</code> method to create an iterator over the cloned elements.</li>\n</ol>\n<p>Here&#x27;s the updated code:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap; \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[ <span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>, ]; \n    nums.<span class=\"hljs-title function_ invoke__\">sort</span>(); \n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Median: {}&quot;</span>, <span class=\"hljs-title function_ invoke__\">median</span>(&amp;nums));\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Mode: {:?}&quot;</span>, <span class=\"hljs-title function_ invoke__\">mode</span>(&amp;nums)); \n} \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">median</span>(nums: &amp;[<span class=\"hljs-type\">u32</span>]) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">f32</span> { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">length</span> = nums.<span class=\"hljs-title function_ invoke__\">len</span>(); \n    <span class=\"hljs-keyword\">match</span> length % <span class=\"hljs-number\">2</span> { \n        <span class=\"hljs-number\">0</span> =&gt; { \n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">first</span> = nums[(length / <span class=\"hljs-number\">2</span>) - <span class=\"hljs-number\">1</span>]; \n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">second</span> = nums[length / <span class=\"hljs-number\">2</span>]; \n            (first asf32 + second <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>) / <span class=\"hljs-number\">2</span>.\n         },\n         _ =&gt; nums[length / <span class=\"hljs-number\">2</span>] <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>, \n    } \n} \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">mode</span>(nums: &amp;[<span class=\"hljs-type\">u32</span>]) <span class=\"hljs-punctuation\">-&gt;</span><span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt; { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">counter</span> = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>(); \n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-keyword\">in</span> nums.<span class=\"hljs-title function_ invoke__\">iter</span>() { \n        *counter.<span class=\"hljs-title function_ invoke__\">entry</span>(num).<span class=\"hljs-title function_ invoke__\">or_insert</span>(<span class=\"hljs-number\">0</span>) += <span class=\"hljs-number\">1</span>; \n    } \n    \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">moder</span>: HashMap&lt;<span class=\"hljs-type\">u32</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>(); \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">highest</span> = <span class=\"hljs-number\">0</span>; \n    <span class=\"hljs-keyword\">for</span> (key, value) <span class=\"hljs-keyword\">in</span> &amp;counter { \n        <span class=\"hljs-keyword\">if</span> value &gt; &amp;highest { \n            highest = *value; \n        } \n        moder.<span class=\"hljs-title function_ invoke__\">entry</span>(*value).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(*key); \n    } \n    moder.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;highest).<span class=\"hljs-title function_ invoke__\">copied</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>().<span class=\"hljs-title function_ invoke__\">collect</span>() \n}\n</code></pre>\n<p>When running the program it produced the following errors</p>\n<pre><code>error[E0308]: mismatched types\n  --&gt; compiler.rs:41:59\n   |\n41 |         moder.entry(*value).or_insert_with(Vec::new).push(*key);\n   |                                                      ---- ^^^^ expected `u32`, found `&amp;u32`\n   |                                                      |\n   |                                                      arguments to this function are incorrect\n   |\nnote: associated function defined here\nhelp: consider dereferencing the borrow\n   |\n41 |         moder.entry(*value).or_insert_with(Vec::new).push(**key);\n   |                                                           +\n\nerror[E0277]: the trait bound `Vec&lt;u32&gt;: Copy` is not satisfied\n  --&gt; compiler.rs:44:25\n   |\n44 |     moder.get(&amp;highest).copied().unwrap_or_default().collect()\n   |                         ^^^^^^ the trait `Copy` is not implemented for `Vec&lt;u32&gt;`\n   |\nnote: required by a bound in `Option::&lt;&amp;T&gt;::copied`\n\nerror[E0599]: `Vec&lt;u32&gt;` is not an iterator\n  --&gt; compiler.rs:44:54\n   |\n44 |       moder.get(&amp;highest).copied().unwrap_or_default().collect()\n   |                                                        ^^^^^^^ `Vec&lt;u32&gt;` is not an iterator; try calling `.into_iter()` or `.iter()`\n   |\n   = note: the following trait bounds were not satisfied:\n           `Vec&lt;u32&gt;: Iterator`\n           which is required by `&amp;mut Vec&lt;u32&gt;: Iterator`\n           `[u32]: Iterator`\n           which is required by `&amp;mut [u32]: Iterator`\n\nerror: aborting due to 3 previous errors\n\nSome errors have detailed explanations: E0277, E0308, E0599.\nFor more information about an error, try `rustc --explain E0277`.\n</code></pre>\n<p>The first error complaining about using a <code>&amp;key</code> was easy to fix with another deference. The second error related to copying the <code>Vec&lt;u32&gt;</code> , a type on the heap, was fixed by cloning instead. <a href=\"https://stackoverflow.com/a/63127877/7838574\">This stack overflow answer</a> helped figure that one out.</p>\n<p>What did I learn from ChatGPTs revision?</p>\n<ul>\n<li>When borrowing a vector it it&#x27;s probably best to use a slice. <a href=\"https://stackoverflow.com/a/32573802/7838574\">This stack overflow</a> elucidates it well.</li>\n<li>Hashmap&#x27;s <code>Entry</code>&#x27;s are extremely helpful.</li>\n</ul>\n<blockquote>\n<p>Ensures a value is in the entry by inserting the default if empty, and returns a mutable reference to the value in the entry. <a href=\"https://doc.rust-lang.org/std/collections/hash_map/enum.Entry.html\">Rust docs</a></p>\n</blockquote>",
            "url": "https://daniel-butler.com/articles/median-and-mode-rust",
            "title": "Median and Mode in Rust",
            "summary": "First example in the Rust book. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-03-05T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/rust-examples",
            "content_html": "<h2>Introduction</h2>\n<p>This is the collection of completed examples while working  though the excellently written <a href=\"https://doc.rust-lang.org/stable/book/\">rust book</a> on a journey to learn Rust.</p>\n<p>My experience with programming while going through this book is mostly python, a few years of JavaScript, a little less of typescript, and about a year and a half of Java. This is my second attempt to go through the book. At the time, types and differences in computers memory didn&#x27;t really click. This time around the decisions made with the language are making a lot more sense.</p>\n<p>Since I don&#x27;t have any real world problems to solve with rust, I&#x27;m completing every example and will be posting it here. Also, to help give feedback and to test chat gpt I&#x27;m using it to review the code.</p>\n<h2>Chapters</h2>\n<h3>8</h3>\n<ul>\n<li>8.3 <a href=\"https://www.daniel-butler.com/articles/median-and-mode-rust\">Median and Mode</a></li>\n<li>8.3 <a href=\"https://www.daniel-butler.com/articles/ust-ray%E2%80%94y-bay%E2%80%94example-fay\">Pig Latin</a></li>\n<li>8.3 <a href=\"https://daniel-butler.com\">Employee Directory</a></li>\n</ul>\n<h3>17</h3>\n<ul>\n<li>17.3 <a href=\"https://www.daniel-butler.com/articles/rust-dyn-traits-example\">Dynamic Traits</a></li>\n</ul>\n<p>More to come!</p>",
            "url": "https://daniel-butler.com/articles/rust-examples",
            "title": "Rust Book Examples",
            "summary": "Rust Book example and solutions index. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-03-05T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/ust-ray—y-bay—example-fay",
            "content_html": "<p>This is a part of the series going through the <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">rust book</a>. I&#x27;m most comfortable with python code, so I&#x27;ve sketched out the program to be written in rust with python first. It helps iron out misunderstandings.</p>\n<h2>Requirements</h2>\n<p>Convert strings to pig latin. The first consonant of each word is moved to the end of the word and “ay” is added, so “first” becomes “irst-fay.” Words that start with a vowel have “hay” added to the end instead (“apple” becomes “apple-hay”). Keep in mind the details about UTF-8 encoding!</p>\n<h2>Python Version</h2>\n<pre><code class=\"hljs language-python\">words = <span class=\"hljs-built_in\">input</span>()\n\noutput_words = []\n<span class=\"hljs-keyword\">for</span> word <span class=\"hljs-keyword\">in</span> words.split(<span class=\"hljs-string\">&quot; &quot;</span>):\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(word) == <span class=\"hljs-number\">0</span>:\n\t\t<span class=\"hljs-keyword\">continue</span>\n\t\t\n\tstart = <span class=\"hljs-string\">&quot;&quot;</span>\n\tend = <span class=\"hljs-string\">&quot;ay&quot;</span>\n\tnew_word = <span class=\"hljs-string\">&quot;&quot;</span>\n\t\n\t<span class=\"hljs-keyword\">for</span> i, letter <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(word):\n\t\t<span class=\"hljs-keyword\">if</span> letter.lower() <span class=\"hljs-keyword\">in</span> [\n\t\t\t<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;e&#x27;</span>, <span class=\"hljs-string\">&#x27;i&#x27;</span>, <span class=\"hljs-string\">&#x27;o&#x27;</span>, <span class=\"hljs-string\">&#x27;u&#x27;</span>,\n\t\t]:\n\t\t\tstart = <span class=\"hljs-string\">&quot;f&quot;</span> <span class=\"hljs-keyword\">if</span> i == <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> start\n\t\t\tnew_word = <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{word[i:]}</span>-<span class=\"hljs-subst\">{start}</span><span class=\"hljs-subst\">{end}</span>&quot;</span>\n\t\t\t<span class=\"hljs-keyword\">break</span>\n\t\t\n\t\tstart += letter\n\t\t\n\toutput_words.append(new_word)\n\t\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot; &quot;</span>.join(output_words))\n</code></pre>\n<p>English Input\n<code>This is a great example of what it means to speak a foreign language with class.</code></p>\n<p>Translated\n<code>is-Thay is-fay a-fay eat-gray example-fay of-fay at-whay it-fay eans-may o-tay eak-spay a-fay oreign-fay anguage-lay ith-way ass.-clay</code></p>\n<h2>Rust version</h2>\n<p>I did use this <a href=\"https://codereview.stackexchange.com/questions/278267/rust-pig-latin-exercise-solution\">stack overflow</a> to unstick myself.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">const</span> VOWELS: [<span class=\"hljs-type\">char</span>; <span class=\"hljs-number\">5</span>] = [<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;e&#x27;</span>, <span class=\"hljs-string\">&#x27;i&#x27;</span>, <span class=\"hljs-string\">&#x27;o&#x27;</span>, <span class=\"hljs-string\">&#x27;u&#x27;</span>];\n\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;E most String&quot;</span>);\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">translated_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">word</span> <span class=\"hljs-keyword\">in</span> input.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>() {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">start</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">translated_word</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">complete</span> = <span class=\"hljs-literal\">false</span>;\n\t\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">letter</span> <span class=\"hljs-keyword\">in</span> word.<span class=\"hljs-title function_ invoke__\">chars</span>() {\n\t\t\t<span class=\"hljs-keyword\">if</span> complete {\n\t\t\t\ttranslated_word.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t\t<span class=\"hljs-keyword\">continue</span>\n\t\t\t}\n\t\t\t\n\t\t\t<span class=\"hljs-keyword\">if</span> VOWELS.<span class=\"hljs-title function_ invoke__\">contains</span>(&amp;letter) {\n\t\t\t\t<span class=\"hljs-keyword\">if</span> start.<span class=\"hljs-title function_ invoke__\">len</span>() == <span class=\"hljs-number\">0</span> {\n\t\t\t\t\tstart = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">from</span>(<span class=\"hljs-string\">&quot;f&quot;</span>);\n\t\t\t\t}\n\t\t\t\ttranslated_word.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t\tcomplete = <span class=\"hljs-literal\">true</span>;\n\t\t\t\t\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\tstart.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t}\n\t\t}\n\t\t\n\t\ttranslated_word = <span class=\"hljs-built_in\">format!</span>(<span class=\"hljs-string\">&quot;{}-{}ay&quot;</span>, translated_word, start);\n\t\t\n\t\ttranslated_words.<span class=\"hljs-title function_ invoke__\">push</span>(translated_word);\n\t}\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;{}&quot;</span>, translated_words.<span class=\"hljs-title function_ invoke__\">join</span>(<span class=\"hljs-string\">&quot; &quot;</span>))\n}\n</code></pre>\n<p>English Input\n<code>This is a great example of what it means to speak a foreign language with class.</code></p>\n<p>Translated\n<code>is-Thay is-fay a-fay eat-gray example-fay of-fay at-whay it-fay eans-may o-tay eak-spay a-fay oreign-fay anguage-lay ith-way ass.-clay</code></p>\n<h2>Challenges</h2>\n<p>Creating the <code>{}-{}ay</code> because of Type mismatch of <code>String</code> and <code>str</code>. The problem seemed to be because I was adding a vector of chars and a string together.</p>\n<pre><code>error[E0308]: mismatched types\n  --&gt; compiler.rs:31:22\n   |\n31 |         translated_word += format!(&quot;-{}ay&quot;, &amp;(*start.as_str()));\n   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&amp;str`, found struct `String`\n   |\n   = note: this error originates in the macro `format` (in Nightly builds, run with -Z macro-backtrace for more info)\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0308`.\n</code></pre>",
            "url": "https://daniel-butler.com/articles/ust-ray—y-bay—example-fay",
            "title": "ust-ray y-bay example-fay",
            "summary": "Python and Rust code helps translate English to Pig Latin! Learn how to speak like a pro with this code, and avoid the pitfalls of type mismatches in Rust.",
            "date_modified": "2023-03-03T00:00:00.000Z",
            "author": {
                "name": "Daniel Butler"
            }
        }
    ]
}