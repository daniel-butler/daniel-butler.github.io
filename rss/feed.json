{
    "version": "https://jsonfeed.org/version/1",
    "title": "Spencer Sharp",
    "home_page_url": "https://daniel-butler.com",
    "feed_url": "https://daniel-butler.com/rss/feed.json",
    "description": "Your blog description",
    "icon": "https://daniel-butler.com/favicon.ico",
    "author": {
        "name": "Spencer Sharp"
    },
    "items": [
        {
            "id": "https://daniel-butler.com/articles/aws-outage-2025-10",
            "content_html": "<blockquote>\n<p>The opinions and information expressed in this post, and every other one, are my own and in no way reflect the opinion of my employer, Amazon.</p>\n</blockquote>\n<p>A lot has been discussed about AWS’s DynamoDB outage already. If you haven’t read it, yet I suggest spending a few minutes to go through it. The best lessons are from the scars of others!</p>\n<p><a href=\"https://aws.amazon.com/message/101925/\">https://aws.amazon.com/message/101925/</a></p>\n<p>There is already a lot on the DNS delegators and how they failed. What I found interesting from reading between the lines was the Network Load Balancer (NLB) failure. AWS has another type of load balancer, Application load balancers (ALB). The ALBs weren’t impacted, why?</p>\n<p>The answer basically comes down to a case of real world flapping. This is the NLB quote from the report.</p>\n<blockquote>\n<p>During the event the NLB health checking subsystem began to experience increased health check failures. This was caused by the health checking subsystem bringing new EC2 instances into service while the network state for those instances had not yet fully propagated. This meant that in some cases health checks would fail even though the underlying NLB node and backend targets were healthy. This resulted in health checks alternating between failing and healthy. This caused NLB nodes and backend targets to be removed from DNS, only to be returned to service when the next health check succeeded.</p>\n</blockquote>\n<p>The likely cause is Network Load Balancers passive health checks - Application Load Balancers don&#x27;t have them.  Active health checks are calls to endpoint like <code>/health</code> while passive health checks monitor actual connections.</p>\n<blockquote>\n<p>With passive health checks, the load balancer observes how targets respond to connections. Passive health checks enable the load balancer to detect an unhealthy target before it is reported as unhealthy by the active health checks. You cannot disable, configure, or monitor passive health checks. Passive health checks are not supported for UDP traffic, and target groups with stickiness turned on.</p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/network/target-group-health-checks.html\">Documentation Link</a></li>\n</ul>\n</blockquote>\n<p>The key point is passive health checks watch the actual traffic. There is no slack for errors.  Some requests worked while others didn&#x27;t causing the targets to flap (<code>fail</code> -&gt; <code>succeed</code> -<code>fail</code> -&gt; <code>succeed</code> -&gt; etc).</p>\n<p>It’s one of those hard lessons of why you don’t necessary want instantaneous feedback. Quick feedback is good but overwhelming feedback becomes noise or worse.</p>\n<p>I’m an outsider looking in, it seems like the biggest mismatch is the resource server wasn’t protected from its clients. Generally throttling is how that protection is implemented.</p>\n<h3>Bonus</h3>\n<p>Below is a visual representation of the failures and the cascading effect it had. The team I am on was impacted after the NLB failures were resolved.</p>\n<svg id=\"mermaid-0\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 1264 484\" style=\"max-width:1264px\" role=\"graphics-document document\" aria-roledescription=\"gantt\"><style>#mermaid-0{font-family:arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#333333;stroke:#333333;}#mermaid-0 .marker.cross{stroke:#333333;}#mermaid-0 svg{font-family:arial,sans-serif;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .mermaid-main-font{font-family:arial,sans-serif;}#mermaid-0 .exclude-range{fill:#eeeeee;}#mermaid-0 .section{stroke:none;opacity:0.2;}#mermaid-0 .section0{fill:rgba(102, 102, 255, 0.49);}#mermaid-0 .section2{fill:#fff400;}#mermaid-0 .section1,#mermaid-0 .section3{fill:white;opacity:0.2;}#mermaid-0 .sectionTitle0{fill:#333;}#mermaid-0 .sectionTitle1{fill:#333;}#mermaid-0 .sectionTitle2{fill:#333;}#mermaid-0 .sectionTitle3{fill:#333;}#mermaid-0 .sectionTitle{text-anchor:start;font-family:arial,sans-serif;}#mermaid-0 .grid .tick{stroke:lightgrey;opacity:0.8;shape-rendering:crispEdges;}#mermaid-0 .grid .tick text{font-family:arial,sans-serif;fill:#333;}#mermaid-0 .grid path{stroke-width:0;}#mermaid-0 .today{fill:none;stroke:red;stroke-width:2px;}#mermaid-0 .task{stroke-width:2;}#mermaid-0 .taskText{text-anchor:middle;font-family:arial,sans-serif;}#mermaid-0 .taskTextOutsideRight{fill:black;text-anchor:start;font-family:arial,sans-serif;}#mermaid-0 .taskTextOutsideLeft{fill:black;text-anchor:end;}#mermaid-0 .task.clickable{cursor:pointer;}#mermaid-0 .taskText.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-0 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-0 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-0 .taskText0,#mermaid-0 .taskText1,#mermaid-0 .taskText2,#mermaid-0 .taskText3{fill:white;}#mermaid-0 .task0,#mermaid-0 .task1,#mermaid-0 .task2,#mermaid-0 .task3{fill:#8a90dd;stroke:#534fbc;}#mermaid-0 .taskTextOutside0,#mermaid-0 .taskTextOutside2{fill:black;}#mermaid-0 .taskTextOutside1,#mermaid-0 .taskTextOutside3{fill:black;}#mermaid-0 .active0,#mermaid-0 .active1,#mermaid-0 .active2,#mermaid-0 .active3{fill:#bfc7ff;stroke:#534fbc;}#mermaid-0 .activeText0,#mermaid-0 .activeText1,#mermaid-0 .activeText2,#mermaid-0 .activeText3{fill:black!important;}#mermaid-0 .done0,#mermaid-0 .done1,#mermaid-0 .done2,#mermaid-0 .done3{stroke:grey;fill:lightgrey;stroke-width:2;}#mermaid-0 .doneText0,#mermaid-0 .doneText1,#mermaid-0 .doneText2,#mermaid-0 .doneText3{fill:black!important;}#mermaid-0 .crit0,#mermaid-0 .crit1,#mermaid-0 .crit2,#mermaid-0 .crit3{stroke:#ff8888;fill:red;stroke-width:2;}#mermaid-0 .activeCrit0,#mermaid-0 .activeCrit1,#mermaid-0 .activeCrit2,#mermaid-0 .activeCrit3{stroke:#ff8888;fill:#bfc7ff;stroke-width:2;}#mermaid-0 .doneCrit0,#mermaid-0 .doneCrit1,#mermaid-0 .doneCrit2,#mermaid-0 .doneCrit3{stroke:#ff8888;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#mermaid-0 .milestone{transform:rotate(45deg) scale(0.8,0.8);}#mermaid-0 .milestoneText{font-style:italic;}#mermaid-0 .doneCritText0,#mermaid-0 .doneCritText1,#mermaid-0 .doneCritText2,#mermaid-0 .doneCritText3{fill:black!important;}#mermaid-0 .vert{stroke:navy;}#mermaid-0 .vertText{font-size:15px;text-anchor:middle;fill:navy!important;}#mermaid-0 .activeCritText0,#mermaid-0 .activeCritText1,#mermaid-0 .activeCritText2,#mermaid-0 .activeCritText3{fill:black!important;}#mermaid-0 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:arial,sans-serif;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g></g><g class=\"grid\" transform=\"translate(75, 434)\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\"><path class=\"domain\" stroke=\"currentColor\" d=\"M0.5,-399V0.5H1114.5V-399\"></path><g class=\"tick\" opacity=\"1\" transform=\"translate(10.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(128.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(246.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(364.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(482.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(600.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(718.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(836.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-20</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(953.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-21</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(1071.5,0)\"><line stroke=\"currentColor\" y2=\"-399\"></line><text fill=\"#000\" y=\"3\" dy=\"1em\" stroke=\"none\" font-size=\"10\" style=\"text-anchor:middle\">2025-10-21</text></g></g><g><rect x=\"0\" y=\"408\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"360\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"48\" width=\"1226.5\" height=\"24\" class=\"section section0\"></rect><rect x=\"0\" y=\"192\" width=\"1226.5\" height=\"24\" class=\"section section3\"></rect><rect x=\"0\" y=\"72\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"288\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"336\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"144\" width=\"1226.5\" height=\"24\" class=\"section section2\"></rect><rect x=\"0\" y=\"384\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"96\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"216\" width=\"1226.5\" height=\"24\" class=\"section section3\"></rect><rect x=\"0\" y=\"264\" width=\"1226.5\" height=\"24\" class=\"section section0\"></rect><rect x=\"0\" y=\"120\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"168\" width=\"1226.5\" height=\"24\" class=\"section section2\"></rect><rect x=\"0\" y=\"312\" width=\"1226.5\" height=\"24\" class=\"section section1\"></rect><rect x=\"0\" y=\"240\" width=\"1226.5\" height=\"24\" class=\"section section3\"></rect></g><g><rect id=\"w1other\" rx=\"3\" ry=\"3\" x=\"75\" y=\"410\" width=\"573\" height=\"20\" transformOrigin=\"361.5px 420px\" class=\"task task1\"></rect><rect id=\"w1other\" rx=\"3\" ry=\"3\" x=\"76\" y=\"362\" width=\"101\" height=\"20\" transformOrigin=\"126.5px 372px\" class=\"task task1\"></rect><rect id=\"task1\" rx=\"3\" ry=\"3\" x=\"77\" y=\"50\" width=\"113\" height=\"20\" transformOrigin=\"133.5px 60px\" class=\"task crit0\"></rect><rect id=\"task5\" rx=\"3\" ry=\"3\" x=\"77\" y=\"194\" width=\"223\" height=\"20\" transformOrigin=\"188.5px 204px\" class=\"task active3\"></rect><rect id=\"w1lambda\" rx=\"3\" ry=\"3\" x=\"79\" y=\"74\" width=\"100\" height=\"20\" transformOrigin=\"129px 84px\" class=\"task task1\"></rect><rect id=\"w1other\" rx=\"3\" ry=\"3\" x=\"79\" y=\"290\" width=\"58\" height=\"20\" transformOrigin=\"108px 300px\" class=\"task task1\"></rect><rect id=\"w1other\" rx=\"3\" ry=\"3\" x=\"79\" y=\"338\" width=\"62\" height=\"20\" transformOrigin=\"110px 348px\" class=\"task task1\"></rect><rect id=\"w1connect\" rx=\"3\" ry=\"3\" x=\"82\" y=\"146\" width=\"199\" height=\"20\" transformOrigin=\"181.5px 156px\" class=\"task task2\"></rect><rect id=\"task10\" rx=\"3\" ry=\"3\" x=\"177\" y=\"386\" width=\"1012\" height=\"20\" transformOrigin=\"683px 396px\" class=\"task active1\"></rect><rect id=\"task2\" rx=\"3\" ry=\"3\" x=\"179\" y=\"98\" width=\"142\" height=\"20\" transformOrigin=\"250px 108px\" class=\"task active1\"></rect><rect id=\"task6\" rx=\"3\" ry=\"3\" x=\"300\" y=\"218\" width=\"202\" height=\"20\" transformOrigin=\"401px 228px\" class=\"task active3\"></rect><rect id=\"task8\" rx=\"3\" ry=\"3\" x=\"301\" y=\"266\" width=\"340\" height=\"20\" transformOrigin=\"471px 276px\" class=\"task done0\"></rect><rect id=\"task3\" rx=\"3\" ry=\"3\" x=\"363\" y=\"122\" width=\"282\" height=\"20\" transformOrigin=\"504px 132px\" class=\"task done1\"></rect><rect id=\"task4\" rx=\"3\" ry=\"3\" x=\"363\" y=\"170\" width=\"246\" height=\"20\" transformOrigin=\"486px 180px\" class=\"task done2\"></rect><rect id=\"task9\" rx=\"3\" ry=\"3\" x=\"420\" y=\"314\" width=\"57\" height=\"20\" transformOrigin=\"448.5px 324px\" class=\"task done1\"></rect><rect id=\"task7\" rx=\"3\" ry=\"3\" x=\"502\" y=\"242\" width=\"127\" height=\"20\" transformOrigin=\"565.5px 252px\" class=\"task active3\"></rect><text id=\"w1other-text\" font-size=\"11\" x=\"361.5\" y=\"423.5\" class=\"taskText taskText1 width-120.4375\">ECS EKS Fargate (EC2)          </text><text id=\"w1other-text\" font-size=\"11\" x=\"182\" y=\"375.5\" class=\"taskTextOutsideRight taskTextOutside1 width-149.15625\">Redshift Query Failures (DDB)  </text><text id=\"task1-text\" font-size=\"11\" x=\"195\" y=\"63.5\" class=\"taskTextOutsideRight taskTextOutside0 critText0 width-119.203125\">DynamoDB DNS Failure           </text><text id=\"task5-text\" font-size=\"11\" x=\"188.5\" y=\"207.5\" class=\"taskText taskText3 activeText3 width-101.34228515625\">EC2 DWFM Failures             </text><text id=\"w1lambda-text\" font-size=\"11\" x=\"184\" y=\"87.5\" class=\"taskTextOutsideRight taskTextOutside1 width-146.328125\">Lambda Wave 1 (DynamoDB)       </text><text id=\"w1other-text\" font-size=\"11\" x=\"142\" y=\"303.5\" class=\"taskTextOutsideRight taskTextOutside1 width-127.96875\">STS Wave 1 (DynamoDB)          </text><text id=\"w1other-text\" font-size=\"11\" x=\"146\" y=\"351.5\" class=\"taskTextOutsideRight taskTextOutside1 width-132.0625\">Console Auth (DynamoDB)        </text><text id=\"w1connect-text\" font-size=\"11\" x=\"181.5\" y=\"159.5\" class=\"taskText taskText2 width-147.546875\">Connect Wave 1 (DynamoDB)      </text><text id=\"task10-text\" font-size=\"11\" x=\"683\" y=\"399.5\" class=\"taskText taskText1 activeText1 width-168.109375\">Redshift Cluster Impairment (EC2) </text><text id=\"task2-text\" font-size=\"11\" x=\"250\" y=\"111.5\" class=\"taskText taskText1 activeText1 width-131.46875\">Lambda SQS Polling Issue       </text><text id=\"task6-text\" font-size=\"11\" x=\"401\" y=\"231.5\" class=\"taskText taskText3 activeText3 width-128.88525390625\">EC2 Network State Issues      </text><text id=\"task8-text\" font-size=\"11\" x=\"471\" y=\"279.5\" class=\"taskText taskText0 doneText0 width-113.6044921875\">NLB Connection Errors         </text><text id=\"task3-text\" font-size=\"11\" x=\"504\" y=\"135.5\" class=\"taskText taskText1 doneText1 width-111.484375\">Lambda Wave 2 (NLB)            </text><text id=\"task4-text\" font-size=\"11\" x=\"486\" y=\"183.5\" class=\"taskText taskText2 doneText2 width-112.703125\">Connect Wave 2 (NLB)           </text><text id=\"task9-text\" font-size=\"11\" x=\"482\" y=\"327.5\" class=\"taskTextOutsideRight taskTextOutside1 doneText1 width-93.125\">STS Wave 2 (NLB)               </text><text id=\"task7-text\" font-size=\"11\" x=\"565.5\" y=\"255.5\" class=\"taskText taskText3 activeText3 width-120.125\">EC2 Throttling Recovery       </text></g><g><text dy=\"0em\" x=\"10\" y=\"62\" font-size=\"11\" class=\"sectionTitle sectionTitle0\"><tspan alignment-baseline=\"central\" x=\"10\">Root Cause</tspan></text><text dy=\"0em\" x=\"10\" y=\"110\" font-size=\"11\" class=\"sectionTitle sectionTitle1\"><tspan alignment-baseline=\"central\" x=\"10\">Lambda</tspan></text><text dy=\"0em\" x=\"10\" y=\"170\" font-size=\"11\" class=\"sectionTitle sectionTitle2\"><tspan alignment-baseline=\"central\" x=\"10\">Connect</tspan></text><text dy=\"0em\" x=\"10\" y=\"230\" font-size=\"11\" class=\"sectionTitle sectionTitle3\"><tspan alignment-baseline=\"central\" x=\"10\">EC2 Cascade</tspan></text><text dy=\"0em\" x=\"10\" y=\"278\" font-size=\"11\" class=\"sectionTitle sectionTitle0\"><tspan alignment-baseline=\"central\" x=\"10\">NLB Cascade</tspan></text><text dy=\"0em\" x=\"10\" y=\"362\" font-size=\"11\" class=\"sectionTitle sectionTitle1\"><tspan alignment-baseline=\"central\" x=\"10\">Other Services</tspan></text></g><g class=\"today\"><line x1=\"7356\" x2=\"7356\" y1=\"25\" y2=\"459\" class=\"today\"></line></g><text x=\"632\" y=\"25\" class=\"titleText\">AWS US-EAST-1 Outage - Service Impact Timeline (14.5 hours)</text></svg>",
            "url": "https://daniel-butler.com/articles/aws-outage-2025-10",
            "title": "AWS Outage - Network Load Balancer Take",
            "summary": "Flapping in the wild.",
            "date_modified": "2025-10-27T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/ai-buddy-mental-modal",
            "content_html": "<blockquote>\n<p>my mental model for AI coding assistants is an <em>incredibly</em> well-read junior engineer with questionable taste, unlimited enthusiasm, no ego, ADHD, and a traumatic brain injury that causes pretty serious memory issues. If they write something down, they&#x27;re good. They&#x27;ve developed all sorts of wild coping strategies that are far more effective than they have any right to be. They generally have no spine and back down way too fast when you question something they&#x27;re doing...even if they&#x27;re right. They&#x27;re prone to distraction. Again, getting them to write down what they&#x27;re supposed to be doing can help a ton.</p>\n<ul>\n<li>Jesse <a href=\"https://blog.fsck.com/2025/05/22/that-was-easy--a-keyboard-for-vibecoding/\">https://blog.fsck.com/2025/05/22/that-was-easy--a-keyboard-for-vibecoding/</a></li>\n</ul>\n</blockquote>",
            "url": "https://daniel-butler.com/articles/ai-buddy-mental-modal",
            "title": "AI Assistants Mental Model",
            "summary": "A surprisingly accurate and funny take on AI models",
            "date_modified": "2025-10-26T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/rust-dyn-traits-example",
            "content_html": "<h2>Overview</h2>\n<p>The example comes from the prompt below in the <a href=\"https://doc.rust-lang.org/book/ch17-03-oo-design-patterns.html\">rust book&#x27;s chapter 17 section 3</a>.</p>\n<blockquote>\n<p>To see the simplicity of maintaining code that uses the state pattern, try a few of these suggestions:</p>\n<ul>\n<li>Add a <code>reject</code> method that changes the post’s state from <code>PendingReview</code> back to <code>Draft</code>.</li>\n<li>Require two calls to <code>approve</code> before the state can be changed to <code>Published</code>.</li>\n<li>Allow users to add text content only when a post is in the <code>Draft</code> state. Hint: have the state object responsible for what might change about the content but not responsible for modifying the <code>Post</code>.</li>\n</ul>\n</blockquote>\n<h3>Result</h3>\n<p>Below is the code I wrote to solve the three challenges above. I struggled with getting the value for the <code>Optional&lt;Box&lt;...&gt;&gt;</code>. I&#x27;m starting to grasp that it all goes back to the types when working with rust. Types are not as big of a deal in Python, so that is taking some getting used to.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> blog::Post;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">post</span> = Post::<span class=\"hljs-title function_ invoke__\">new</span>();\n\n    post.<span class=\"hljs-title function_ invoke__\">add_text</span>(<span class=\"hljs-string\">&quot;I ate a salad for lunch today&quot;</span>);\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\n    post.<span class=\"hljs-title function_ invoke__\">request_review</span>();\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">reject</span>();\n\t<span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">request_review</span>();\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n\t\n\tpost.<span class=\"hljs-title function_ invoke__\">approve</span>();\n\tpost.<span class=\"hljs-title function_ invoke__\">approve</span>();\n\t<span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-string\">&quot;I ate a salad for lunch today&quot;</span>, post.<span class=\"hljs-title function_ invoke__\">content</span>());\n}\n\n\n<span class=\"hljs-keyword\">mod</span> blog {\n\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Post</span> {\n\t\tstate: <span class=\"hljs-type\">Option</span>&lt;<span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;&gt;,\n\t\tcontent: <span class=\"hljs-type\">String</span>,\n\t}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">Post</span> {\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> Post {\n\t\t\tPost {\n\t\t\t\tstate: <span class=\"hljs-title function_ invoke__\">Some</span>(<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Draft {})),\n\t\t\t\tcontent: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>(),\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>() {\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Can add content: {}&quot;</span>, s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>());\n\t\t\t\n\t\t\t\t<span class=\"hljs-keyword\">if</span> s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>() {\n\t\t\t\t\t<span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-type\">str</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">content</span> = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>().<span class=\"hljs-title function_ invoke__\">unwrap</span>().<span class=\"hljs-title function_ invoke__\">content</span>(<span class=\"hljs-keyword\">self</span>);\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;content: {}&quot;</span>, content);\n\t\t\tcontent\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">request_review</span>())\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">approve</span>());\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">take</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">self</span>.state = <span class=\"hljs-title function_ invoke__\">Some</span>(s.<span class=\"hljs-title function_ invoke__\">reject</span>());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">trait</span> <span class=\"hljs-title class_\">State</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt;;\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, _post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n\t\t \t<span class=\"hljs-string\">&quot;&quot;</span>\n\t\t }\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">can_add_content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t\t\t<span class=\"hljs-literal\">false</span>\n\t\t}\n\t}\n\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Draft</span> {}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Draft</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(PendingReview::<span class=\"hljs-title function_ invoke__\">new</span>())\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">can_add_content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t\t\t<span class=\"hljs-literal\">true</span>\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\treviews: <span class=\"hljs-type\">i8</span>\n\t}\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> PendingReview {\n\t\t\tPendingReview { reviews: <span class=\"hljs-number\">0</span> }\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n\t\t\t<span class=\"hljs-keyword\">self</span>.reviews += <span class=\"hljs-number\">1</span>;\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">get_reviews</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">i8</span> {\n\t\t\t<span class=\"hljs-keyword\">self</span>.reviews\n\t\t}\n\t}\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">PendingReview</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">state</span> = PendingReview::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\tstate.<span class=\"hljs-title function_ invoke__\">add_review</span>();\n\t\t\n\t\t\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">as_ref</span>().<span class=\"hljs-title function_ invoke__\">get_reviews</span>() == <span class=\"hljs-number\">0</span> {\n\t\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(state)\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Published {})\n\t\t\t}\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(Draft {})\n\t\t }\n\t}\n\t\n\t<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Published</span> {}\n\t\n\t<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">State</span> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Published</span> {\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t\t<span class=\"hljs-keyword\">self</span>\n\t\t}\n\t\t\n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t }\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">self</span>: <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">Self</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Box</span>&lt;<span class=\"hljs-keyword\">dyn</span> State&gt; {\n\t\t \t<span class=\"hljs-keyword\">self</span>\n\t\t }\n\t\t \n\t\t<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n\t\t\t&amp;post.content\n\t\t}\n\t}\n}\n</code></pre>\n<h2>Refinement</h2>\n<p>Now, what can be learned from asking ChatGPT?</p>\n<p>Open AI&#x27;s ChatGPT prompt.</p>\n<pre><code>Refactor this code to be more performant.\n</code></pre>\n<h3>Response</h3>\n<p>One possible way to make the code more performant is to avoid unnecessary allocations and cloning of data. One such example is in the <code>content()</code> method of the <code>State</code> trait, where the content is cloned unnecessarily.</p>\n<ol>\n<li>Instead, we can use a reference to the existing content to avoid the clone:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>&lt;<span class=\"hljs-symbol\">&#x27;a</span>&gt;(&amp;<span class=\"hljs-keyword\">self</span>, post: &amp;<span class=\"hljs-symbol\">&#x27;a</span> Post) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-symbol\">&#x27;a</span> <span class=\"hljs-type\">str</span> {\n    &amp;post.content\n}\n</code></pre>\n<ol start=\"2\">\n<li>Similarly, in the <code>add_text()</code> method of the <code>Post</code> struct, we can use a reference to the text to avoid the allocation and copying of the string:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(s) = <span class=\"hljs-keyword\">self</span>.state.<span class=\"hljs-title function_ invoke__\">as_ref</span>() {\n        <span class=\"hljs-keyword\">if</span> s.<span class=\"hljs-title function_ invoke__\">can_add_content</span>() {\n            <span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n        }\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>We can also avoid unnecessary boxing and dynamic dispatch by using an enum instead of a trait object for the state of the post. This can simplify the code and make it more efficient:</li>\n</ol>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">mod</span> blog {\n    <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Post</span> {\n        state: State,\n        content: <span class=\"hljs-type\">String</span>,\n    }\n\n    <span class=\"hljs-meta\">#[derive(Debug)]</span>\n    <span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">State</span> {\n        Draft { can_add_content: <span class=\"hljs-type\">bool</span> },\n        PendingReview { reviews: <span class=\"hljs-type\">i8</span> },\n        Published,\n    }\n\n    <span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">Post</span> {\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-&gt;</span> Post {\n            Post {\n                state: State::Draft { can_add_content: <span class=\"hljs-literal\">true</span> },\n                content: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>(),\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">add_text</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, text: &amp;<span class=\"hljs-type\">str</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Draft { can_add_content: <span class=\"hljs-literal\">true</span> } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.content.<span class=\"hljs-title function_ invoke__\">push_str</span>(text);\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">content</span>(&amp;<span class=\"hljs-keyword\">self</span>) <span class=\"hljs-punctuation\">-&gt;</span> &amp;<span class=\"hljs-type\">str</span> {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Published = <span class=\"hljs-keyword\">self</span>.state {\n                &amp;<span class=\"hljs-keyword\">self</span>.content\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-string\">&quot;&quot;</span>\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">request_review</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::Draft { .. } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.state = State::PendingReview { reviews: <span class=\"hljs-number\">0</span> };\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">approve</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::PendingReview { reviews } = &amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>.state {\n                *reviews += <span class=\"hljs-number\">1</span>;\n                <span class=\"hljs-keyword\">if</span> *reviews &gt;= <span class=\"hljs-number\">2</span> {\n                    <span class=\"hljs-keyword\">self</span>.state = State::Published;\n                }\n            }\n        }\n\n        <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">reject</span>(&amp;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">State</span>::PendingReview { .. } = <span class=\"hljs-keyword\">self</span>.state {\n                <span class=\"hljs-keyword\">self</span>.state = State::Draft { can_add_content: <span class=\"hljs-literal\">true</span> };\n            }\n        }\n    }\n}\n</code></pre>\n<p>With these changes, the code should be more efficient and performant.</p>\n<h2>Summary</h2>\n<p>For the first two points, as best I can tell, it is already happening. And the last point is fair and even called out in the rusty book. We used <code>Box</code>s to show how they work with <code>dyn trait</code>s. Overall because I didn&#x27;t come up with a majority of the code it didn&#x27;t leave a lot of room for ChatGPT to fix it.</p>",
            "url": "https://daniel-butler.com/articles/rust-dyn-traits-example",
            "title": "Rust Book Dynamic Traits Example",
            "summary": "Expanding on the example in Rust Book's chapter 17 section 3. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-05-05T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/reading-list",
            "content_html": "<h1>Overview</h1>\n<p>List of articles I&#x27;ve found helpful, insightful, and want to remember.</p>\n<h2>List</h2>\n<ul>\n<li><a href=\"https://www.scattered-thoughts.net/writing/reflections-on-a-decade-of-coding\">https://www.scattered-thoughts.net/writing/reflections-on-a-decade-of-coding</a></li>\n<li><a href=\"https://skamille.medium.com/an-incomplete-list-of-skills-senior-engineers-need-beyond-coding-8ed4a521b29f\">https://skamille.medium.com/an-incomplete-list-of-skills-senior-engineers-need-beyond-coding-8ed4a521b29f</a></li>\n</ul>",
            "url": "https://daniel-butler.com/articles/reading-list",
            "title": "Good Reads",
            "summary": "Collection of articles",
            "date_modified": "2023-03-17T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/hr-application",
            "content_html": "<h1>Overview</h1>\n<p>This is <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">the third example problem</a> from the rust book. As before there will be a python example then the Rust example.</p>\n<h2>Problem Statement</h2>\n<p>Using a hash map and vectors, create a text interface to allow a user to add employee names to a department in a company. For example, “Add Sally to Engineering” or “Add Amir to Sales.” Then let the user retrieve a list of all people in a department or all people in the company by department, sorted alphabetically.</p>\n<h3>Input</h3>\n<pre><code>Add Sally to Engineering\nAdd Amir to Sales\nAdd Juan to Accounting\nAdd George to HR\nAdd Eric to Sales\nAdd Sam to Engineering\nAdd Cole to Engineering\nList Employees\nList Sales\nList Engineering\nList HR\n</code></pre>\n<h2>Python</h2>\n<p>This uses a simple while loop and stores the data in a dictionary by department which is flattened with a simple list comprehension.</p>\n<pre><code class=\"hljs language-python\">employees = {}\nrepeat = <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">company</span>(<span class=\"hljs-params\">command</span>):\n\tcommand_words = command.split(<span class=\"hljs-string\">&quot; &quot;</span>)\n\tcmd = command_words[<span class=\"hljs-number\">0</span>].lower()\n\t<span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;add&quot;</span>:\n\t\tname = command_words[<span class=\"hljs-number\">1</span>]\n\t\tdepartment = command_words[<span class=\"hljs-number\">3</span>].lower()\n\t\temp_department = employees.get(department, [])\n\t\temp_department.append(name)\n\t\temployees[department] = emp_department\n\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Added <span class=\"hljs-subst\">{name}</span> to <span class=\"hljs-subst\">{department}</span>!&quot;</span>)\n\t<span class=\"hljs-keyword\">elif</span> cmd == <span class=\"hljs-string\">&quot;list&quot;</span>:\n\t\tlist_type = command_words[<span class=\"hljs-number\">1</span>].lower()\n\t\t<span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span>:\n\t\t\temps = [\n\t\t\t\temp\n\t\t\t\t<span class=\"hljs-keyword\">for</span> emps_dep <span class=\"hljs-keyword\">in</span> employees.values()\n\t\t\t\t<span class=\"hljs-keyword\">for</span> emp <span class=\"hljs-keyword\">in</span> emps_dep\n\t\t\t]\n\t\t\temps.sort()\n\t\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Employees: <span class=\"hljs-subst\">{emps}</span>&quot;</span>)\n\t\t<span class=\"hljs-keyword\">else</span>:\n\t\t\temps = employees.get(list_type, [])\n\t\t\temps.sort()\n\t\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Employees in Department <span class=\"hljs-subst\">{list_type}</span>: <span class=\"hljs-subst\">{emps}</span>&quot;</span>)\n\t<span class=\"hljs-keyword\">elif</span> cmd <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\">&quot;exit&quot;</span>, <span class=\"hljs-string\">&quot;quit&quot;</span>]:\n\t\t<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Exiting...&quot;</span>)\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">False</span>\n\t\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.\\n============================\\n&quot;</span>)\n\n<span class=\"hljs-keyword\">while</span> repeat:\n\tcommand = <span class=\"hljs-built_in\">input</span>()\n\trepeat = company(command)\n\t\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\n\nAdd Sally to Engineering\nAdded Sally to engineering!\nAdd Amir to Sales\nAdded Amir to sales!\nAdd Juan to Accounting\nAdded Juan to accounting!\nAdd George to HR\nAdded George to hr!\nAdd Eric to Sales\nAdded Eric to sales!\nAdd Sam to Engineering\nAdded Sam to engineering!\nAdd Cole to Engineering\nAdded Cole to engineering!\nlist employees \nEmployees: [&#x27;Amir&#x27;, &#x27;Cole&#x27;, &#x27;Eric&#x27;, &#x27;George&#x27;, &#x27;Juan&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]\nlist sales\nEmployees in Department sales: [&#x27;Amir&#x27;, &#x27;Eric&#x27;]\nlist engineering\nEmployees in Department engineering: [&#x27;Cole&#x27;, &#x27;Sally&#x27;, &#x27;Sam&#x27;]\nlist hr \nEmployees in Department hr: [&#x27;George&#x27;]\nexit\nExiting...\n</code></pre>\n<h2>Rust</h2>\n<p>This is my original rust solution. The solution takes advantage of the lessons learned from the median and mode refactoring by using entries when modifying <code>HashMap</code>s. When running into issues about typing being off or the size not being known at compile time, the errors made more sense. The stack vs. the heap is an integral concept that is never touched on in python.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n<span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">employees_real</span>: HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">repeat</span> = <span class=\"hljs-literal\">true</span>;\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;============================&quot;</span>);\n\t\n\t<span class=\"hljs-keyword\">while</span> repeat {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Invalid input!&quot;</span>);\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Input: {}&quot;</span>, input);\n\t\trepeat = <span class=\"hljs-title function_ invoke__\">record_employee</span>(&amp;input, &amp;<span class=\"hljs-keyword\">mut</span> employees_real);\n\t}\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">String</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">map</span>(<span class=\"hljs-type\">String</span>::from).<span class=\"hljs-title function_ invoke__\">collect</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\n\t<span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;add&quot;</span> {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n\t\temployees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> cmd == <span class=\"hljs-string\">&quot;list&quot;</span> {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t\n\t\t<span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\t<span class=\"hljs-keyword\">for</span> (_dept, dept_emps) <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">iter</span>() {\n\t\t\t\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">emp</span> <span class=\"hljs-keyword\">in</span> dept_emps.<span class=\"hljs-title function_ invoke__\">into_iter</span>() {\n\t\t\t\t\temps.<span class=\"hljs-title function_ invoke__\">push</span>(emp);\n\t\t\t\t}\n\t\t\t}\n\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">nut</span> emps = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type).<span class=\"hljs-title function_ invoke__\">cloned</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>();\n\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n\t\t}\n\t} <span class=\"hljs-keyword\">else</span> {\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\nInput: Add Sally to Engineering\nAdded Sally to engineering\nInput: Add Amir to Sales\nAdded Amir to sales\nInput: Add Juan to Accounting\nAdded Juan to accounting\nInput: Add George to HR\nAdded George to hr\nInput: Add Eric to Sales\nAdded Eric to sales\nInput: Add Sam to Engineering\nAdded Sam to engineering\nInput: Add Cole to Engineering\nAdded Cole to engineering\nInput: List Employees\nEmployees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List Sales\nEmployees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]\nInput: List Engineering\nEmployees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List HR\nEmployees in Department hr: [&quot;George&quot;]\nInput: Exit\nExiting...\n</code></pre>\n<p>Looks good!!</p>\n<h3>Challenges</h3>\n<p>The major hurdle when creating the solution above was how to split the input by whitespace into a vector of strings.  I asked ChatGPT for some help...</p>\n<blockquote>\n<p>How can this error be fixed?</p>\n</blockquote>\n<pre><code>a value of type `Vec&lt;&amp;String&gt;` cannot be built from an iterator over elements of type `&amp;str`\n</code></pre>\n<blockquote>\n<p>the error comes from this line of rust code:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;&amp;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n</code></pre>\n<p>The response which was very helpful.</p>\n<blockquote>\n<p>The error message suggests that the <code>split_whitespace()</code> method is returning an iterator over <code>&amp;str</code> values, but you are trying to collect them into a <code>Vec&lt;&amp;String&gt;</code>, which expects references to <code>String</code> values.\nTo fix this error, you can either change the type of <code>command_words</code> to <code>Vec&lt;&amp;str&gt;</code>:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\">`<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;&amp;<span class=\"hljs-type\">str</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();`\n</code></pre>\n<blockquote>\n<p>Or you can change the type of the elements in the <code>Vec</code> to <code>String</code> instead of <code>&amp;String</code>:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">map</span>(<span class=\"hljs-type\">String</span>::from).<span class=\"hljs-title function_ invoke__\">collect</span>();`\n</code></pre>\n<blockquote>\n<p>The <code>map()</code> method is used to transform each <code>&amp;str</code> value into a <code>String</code> value.</p>\n</blockquote>\n<h2>Refactoring</h2>\n<p>Now time for the refactoring!! I asked how the code above could be more idiomatic. Here was the response.</p>\n<blockquote>\n<p>Here are some suggestions to make the Rust code more idiomatic:</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>Use pattern matching instead of if/else statements:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n    <span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n        <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n        employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n        <span class=\"hljs-literal\">true</span>\n    }\n    <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n        <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n            <span class=\"hljs-keyword\">for</span> (_dept, dept_emps) <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">iter</span>() {\n                emps.<span class=\"hljs-title function_ invoke__\">extend</span>(dept_emps);\n            }\n            emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n            <span class=\"hljs-literal\">true</span>\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type).<span class=\"hljs-title function_ invoke__\">cloned</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>();\n            emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n            <span class=\"hljs-literal\">true</span>\n        }\n    }\n    _ =&gt; {\n        <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n        <span class=\"hljs-literal\">false</span>\n    }\n}\n</code></pre>\n<blockquote>\n<ol start=\"2\">\n<li>Use <code>if let</code> instead of <code>unwrap_or_default</code>:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n    emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n} <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n}\n<span class=\"hljs-literal\">true</span>\n</code></pre>\n<blockquote>\n<ol start=\"3\">\n<li>Use <code>flatten</code> instead of nested loops:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n<span class=\"hljs-literal\">true</span>\n\n</code></pre>\n<blockquote>\n<ol start=\"4\">\n<li>Use <code>&amp;str</code> instead of <code>String</code> when possible:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">str</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;_&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n    <span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n        <span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n            employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n            <span class=\"hljs-literal\">true</span>\n        }\n        <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\n            <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n                <span class=\"hljs-literal\">true</span>\n            } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n                emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n                <span class=\"hljs-literal\">true</span>\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n                <span class=\"hljs-literal\">true</span>\n            }\n        }\n        _ =&gt; {\n            <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n            <span class=\"hljs-literal\">false</span>\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<ol start=\"5\">\n<li>Use <code>let mut</code> only when necessary:</li>\n</ol>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">dept_emps</span> <span class=\"hljs-keyword\">in</span> employees.<span class=\"hljs-title function_ invoke__\">values</span>() {\n    emps.<span class=\"hljs-title function_ invoke__\">extend</span>(dept_emps);\n}\nemps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n<span class=\"hljs-literal\">true</span>\n</code></pre>\n<p>Since it is broken into a few sections. I&#x27;ve put it all into a working code block below with the exception of point #5 because it conflicts with the flatten method #3. Flatten makes more sense to me. It is debatable that #5 is a clearer way to express the logic.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n<span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">employees_real</span>: HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">repeat</span> = <span class=\"hljs-literal\">true</span>;\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Welcome: to the employee directory! when you are done type exit.&quot;</span>);\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;============================&quot;</span>);\n\t\n\t<span class=\"hljs-keyword\">while</span> repeat {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;Invalid input!&quot;</span>);\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Input: {}&quot;</span>, input);\n\t\trepeat = <span class=\"hljs-title function_ invoke__\">record_employee</span>(&amp;input, &amp;<span class=\"hljs-keyword\">mut</span> employees_real);\n\t}\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">record_employee</span>(command: &amp;<span class=\"hljs-type\">String</span>, employees: &amp;<span class=\"hljs-keyword\">mut</span> HashMap&lt;<span class=\"hljs-type\">String</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt;&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">bool</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">command_words</span>: <span class=\"hljs-type\">Vec</span>&lt;_&gt; = command.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>().<span class=\"hljs-title function_ invoke__\">collect</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">cmd</span> = command_words[<span class=\"hljs-number\">0</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\n\t<span class=\"hljs-keyword\">match</span> cmd.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n\t\t\n\t\t<span class=\"hljs-string\">&quot;add&quot;</span> =&gt; {\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">name</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">dep</span> = command_words[<span class=\"hljs-number\">3</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Added {} to {}&quot;</span>, name, dep);\n\t\t    employees.<span class=\"hljs-title function_ invoke__\">entry</span>(dep).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(name);\n\t\t    <span class=\"hljs-literal\">true</span>\n\t    }\n\t\t\n\t    <span class=\"hljs-string\">&quot;list&quot;</span> =&gt; {\n\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">list_type</span> = command_words[<span class=\"hljs-number\">1</span>].<span class=\"hljs-title function_ invoke__\">to_lowercase</span>();\n\t\t\n\t\t    <span class=\"hljs-keyword\">if</span> list_type == <span class=\"hljs-string\">&quot;employees&quot;</span> {\n\t\t\t    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = employees.<span class=\"hljs-title function_ invoke__\">values</span>().<span class=\"hljs-title function_ invoke__\">flatten</span>().<span class=\"hljs-title function_ invoke__\">cloned</span>().collect::&lt;<span class=\"hljs-type\">Vec</span>&lt;_&gt;&gt;();\n\t\t\t    emps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees: {:?}&quot;</span>, emps);\n\t\t    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(emps) = employees.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;list_type) {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">emps</span> = emps.<span class=\"hljs-title function_ invoke__\">clone</span>();\n\t\t\t\temps.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Employees in Department {}: {:?}&quot;</span>, list_type, emps);\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Department {} not found&quot;</span>, list_type);\n\t\t\t}\n\t\t\t<span class=\"hljs-literal\">true</span>\n\t    }\n\t\t\n\t    _ =&gt; {\n\t\t    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Exiting...&quot;</span>);\n\t\t    <span class=\"hljs-literal\">false</span>\n\t    }\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Welcome: to the employee directory! when you are done type exit.\n============================\nInput: Add Sally to Engineering\nAdded Sally to engineering\nInput: Add Amir to Sales\nAdded Amir to sales\nInput: Add Juan to Accounting\nAdded Juan to accounting\nInput: Add George to HR\nAdded George to hr\nInput: Add Eric to Sales\nAdded Eric to sales\nInput: Add Sam to Engineering\nAdded Sam to engineering\nInput: Add Cole to Engineering\nAdded Cole to engineering\nInput: List Employees\nEmployees: [&quot;Amir&quot;, &quot;Cole&quot;, &quot;Eric&quot;, &quot;George&quot;, &quot;Juan&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List Sales\nEmployees in Department sales: [&quot;Amir&quot;, &quot;Eric&quot;]\nInput: List Engineering\nEmployees in Department engineering: [&quot;Cole&quot;, &quot;Sally&quot;, &quot;Sam&quot;]\nInput: List HR\nEmployees in Department hr: [&quot;George&quot;]\nInput: Exit\nExiting...\n</code></pre>\n<p>Overall I&#x27;m impressed with the result. I think it helped show how to use the <code>collect::&lt;T&gt;()</code> method to convert types and how to use <code>if let</code> idiomatically.</p>",
            "url": "https://daniel-butler.com/articles/hr-application",
            "title": "Rust HR Example Question",
            "summary": "Rust Book example and solution to the HR application exercise.",
            "date_modified": "2023-03-08T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/median-and-mode-rust",
            "content_html": "<p>This is the second example I&#x27;m working on from the <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">rust book</a>.</p>\n<p>In python, I&#x27;ve used the statistics standard library module as the test case to validate the code written in the &quot;brute force method&quot;. If this was production code, I would use the statistics module instead of rolling my own.</p>\n<h2>Problem Statement</h2>\n<p>Given a list of integers, use a vector and return the median (when sorted, the value in the middle position) and mode (the value that occurs most often; a hash map will be helpful here) of the list.</p>\n<h3>Input</h3>\n<pre><code>[13, 8, 2, 21, 21, 6, 27, 15, 14, 22, 17, 16, 7, 15, 12, 10, 25, 21, 27, 29, 17, 29, 26, 10, 14, 11, 23, 8, 27, 4]\n</code></pre>\n<h1>Median</h1>\n<p>What we are looking for is when sorted, the value in the middle position of an array of numbers. When there are an even number of values in the array then find the middle value between the two middle entries.</p>\n<h2>Python</h2>\n<pre><code class=\"hljs language-python\">nums = [\n\t\t<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>\n]\n\nnums = <span class=\"hljs-built_in\">sorted</span>(nums)\n\n<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(nums) % <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">1</span>:\n\tmedian = nums[<span class=\"hljs-built_in\">int</span>(<span class=\"hljs-built_in\">len</span>(nums)/<span class=\"hljs-number\">2</span>)]\n<span class=\"hljs-keyword\">else</span>:\n\tmiddle_index = <span class=\"hljs-built_in\">len</span>(nums) / <span class=\"hljs-number\">2</span>\n\tfirst_index = <span class=\"hljs-built_in\">int</span>(middle_index - <span class=\"hljs-number\">.5</span>)\n\tsecond_index = <span class=\"hljs-built_in\">int</span>(middle_index + <span class=\"hljs-number\">.5</span>)\n\tmedian = (nums[first_index]+nums[second_index])/<span class=\"hljs-number\">2</span>\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Median Brute method: <span class=\"hljs-subst\">{median}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">import</span> statistics\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Median Standard library method: <span class=\"hljs-subst\">{statistics.median(nums)}</span>&quot;</span>)\n</code></pre>\n<p>Output</p>\n<pre><code>Median Brute method: 15.5\nMedian Standard library method: 15.5\n</code></pre>\n<h2>Rust</h2>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>];\n\n\tnums.<span class=\"hljs-title function_ invoke__\">sort</span>();\n\t<span class=\"hljs-built_in\">print!</span>(<span class=\"hljs-string\">&quot;Median: {}&quot;</span>, <span class=\"hljs-title function_ invoke__\">median</span>(&amp;nums))\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">median</span>(nums: &amp;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">f32</span> {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">length</span>: <span class=\"hljs-type\">f32</span>= nums.<span class=\"hljs-title function_ invoke__\">len</span>() <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>;\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">middle_index</span>: <span class=\"hljs-type\">f32</span> = length / <span class=\"hljs-number\">2</span>.;\n\t\n\t<span class=\"hljs-keyword\">match</span> nums.<span class=\"hljs-title function_ invoke__\">len</span>() % <span class=\"hljs-number\">2</span> {\n\t\t<span class=\"hljs-number\">0</span> =&gt; {\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">first</span>= nums[(middle_index - <span class=\"hljs-number\">0.5</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>];\n\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">second</span> = nums[(middle_index + <span class=\"hljs-number\">0.5</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>];\n\t\t\t<span class=\"hljs-title function_ invoke__\">return</span> (first <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span> + second <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>) / <span class=\"hljs-number\">2</span>.\n\t\t}\n\t\t_ =&gt; {\n\t\t\t<span class=\"hljs-keyword\">return</span> nums[middle_index <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">u32</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">usize</span>] <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>\n\t\t}\n\t}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Median: 15.5\n</code></pre>\n<h2>Challenges</h2>\n<p>Not understanding Scope and types being returned. My solution was to put the logic into its own function.</p>\n<pre><code>error[E0425]: cannot find value `median` in this scope\n  --&gt; compiler.rs:21:23\n   |\n21 |     print!(&quot;Median: {}&quot;, median)\n   |                          ^^^^^^ not found in this scope\n</code></pre>\n<p>Numbers are not all the same type. I solved it by casting the numbers into the proper type. Sometimes casting the numbers twice because <code>f32</code> can&#x27;t be cast into <code>usize</code> type. <a href=\"https://stackoverflow.com/a/44552464/7838574\">This stack overflow</a> helped get me to the solution.</p>\n<pre><code>error[E0277]: cannot subtract `{float}` from `usize`\n  --&gt; compiler.rs:12:34\n   |\n12 |             let first = nums[middle_index - 0.5];\n   |                                           ^ no implementation for `usize - {float}`\n</code></pre>\n<h1>Mode</h1>\n<h2>Python</h2>\n<pre><code class=\"hljs language-python\">nums = [\n\t\t<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>\n]\n\ncount_dict = {}\n<span class=\"hljs-keyword\">for</span> num <span class=\"hljs-keyword\">in</span> nums:\n\tcount_dict[num] = count_dict.get(num, <span class=\"hljs-number\">0</span>) + <span class=\"hljs-number\">1</span>\n\t\nmode_dict = {}\nhighest = <span class=\"hljs-number\">0</span>\n<span class=\"hljs-keyword\">for</span> key, value <span class=\"hljs-keyword\">in</span> count_dict.items():\n\tval_list = mode_dict.get(value, [])\n\tval_list.append(key)\n\tmode_dict[value] = val_list\n\t<span class=\"hljs-keyword\">if</span> value &gt; highest:\n\t\thighest = value\n\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Mode Brute force method: <span class=\"hljs-subst\">{mode_dict[highest]}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">import</span> statistics\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Mode Standard library method: <span class=\"hljs-subst\">{statistics.mode(nums)}</span>&quot;</span>)\n</code></pre>\n<p>Output</p>\n<pre><code>Mode Brute force method: [21, 27]\n\nstatistics.StatisticsError: no unique mode; found 2 equally common values\n</code></pre>\n<p>The statistics standard library throws an error because there are two most common values.</p>\n<h2>Rust</h2>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>];\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Mode: {:?}&quot;</span>, <span class=\"hljs-title function_ invoke__\">mode</span>(&amp;nums));\n}\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">mode</span>(nums: &amp;<span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt; {\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">counter</span> = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\n\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-keyword\">in</span> nums {\n\t\t<span class=\"hljs-keyword\">match</span> counter.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;num) {\n\t\t\t<span class=\"hljs-title function_ invoke__\">Some</span>(count) =&gt; counter.<span class=\"hljs-title function_ invoke__\">insert</span>(num, count + <span class=\"hljs-number\">1</span>),\n\t\t\t<span class=\"hljs-literal\">None</span> =&gt; counter.<span class=\"hljs-title function_ invoke__\">insert</span>(num, <span class=\"hljs-number\">1</span>)\n\t\t};\n\t}\n\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">moder</span>: HashMap&lt;<span class=\"hljs-type\">u32</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">highest</span> = <span class=\"hljs-number\">0</span>;\n\t<span class=\"hljs-keyword\">for</span> (key, value) <span class=\"hljs-keyword\">in</span> &amp;counter {\n\t\t<span class=\"hljs-keyword\">if</span> value &gt; &amp;highest {\n\t\t\thighest = *value;\n\t\t}\n\t\t<span class=\"hljs-keyword\">match</span> moder.<span class=\"hljs-title function_ invoke__\">get_mut</span>(&amp;value) {\n\t\t\t<span class=\"hljs-title function_ invoke__\">Some</span>(keys) =&gt; {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">ks</span> = keys.<span class=\"hljs-title function_ invoke__\">to_vec</span>();\n\t\t\t\tks.<span class=\"hljs-title function_ invoke__\">push</span>(**key);\n\t\t\t\tmoder.<span class=\"hljs-title function_ invoke__\">insert</span>(*value, ks);\n\t\t\t},\n\t\t\t<span class=\"hljs-literal\">None</span> =&gt; {\n\t\t\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">keys</span> = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t\t\tkeys.<span class=\"hljs-title function_ invoke__\">push</span>(**key);\n\t\t\t\tmoder.<span class=\"hljs-title function_ invoke__\">insert</span>(*value, keys);\n\t\t\t}\n\t\t};\n\t}\n\t\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(keys) = moder.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;highest) {\n\t\t<span class=\"hljs-keyword\">return</span> keys.<span class=\"hljs-title function_ invoke__\">to_vec</span>()\n\t} <span class=\"hljs-keyword\">else</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>()\n\t};\n}\n</code></pre>\n<p>When I asked ChatGPT how I can make the code more idiomatic. This was the response</p>\n<blockquote>\n<p>Here are some suggestions to make the Rust code more idiomatic:</p>\n<ol>\n<li>Use a <code>&amp;[u32]</code> slice instead of a <code>Vec&lt;u32&gt;</code> for the function parameters. This allows the function to accept both a <code>Vec&lt;u32&gt;</code> and a slice, which is more flexible.</li>\n<li>Use <code>unwrap_or</code> instead of the <code>match</code> statement in the <code>mode</code> function to insert a value into the hash map with a default value of 1 if the key does not exist.</li>\n<li>Use <code>entry</code> method to insert or update values in the hash map.</li>\n<li>Use <code>iter()</code> method instead of a reference to iterate over the vector elements.</li>\n<li>Use <code>collect</code> method to convert an iterator to a vector.</li>\n<li>Use <code>copied</code> method to create an iterator over the copied elements.</li>\n<li>Use <code>cloned</code> method to create an iterator over the cloned elements.</li>\n</ol>\n<p>Here&#x27;s the updated code:</p>\n</blockquote>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::collections::HashMap; \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nums</span> = <span class=\"hljs-built_in\">vec!</span>[ <span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">4</span>, ]; \n    nums.<span class=\"hljs-title function_ invoke__\">sort</span>(); \n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Median: {}&quot;</span>, <span class=\"hljs-title function_ invoke__\">median</span>(&amp;nums));\n    <span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;Mode: {:?}&quot;</span>, <span class=\"hljs-title function_ invoke__\">mode</span>(&amp;nums)); \n} \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">median</span>(nums: &amp;[<span class=\"hljs-type\">u32</span>]) <span class=\"hljs-punctuation\">-&gt;</span> <span class=\"hljs-type\">f32</span> { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">length</span> = nums.<span class=\"hljs-title function_ invoke__\">len</span>(); \n    <span class=\"hljs-keyword\">match</span> length % <span class=\"hljs-number\">2</span> { \n        <span class=\"hljs-number\">0</span> =&gt; { \n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">first</span> = nums[(length / <span class=\"hljs-number\">2</span>) - <span class=\"hljs-number\">1</span>]; \n            <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">second</span> = nums[length / <span class=\"hljs-number\">2</span>]; \n            (first asf32 + second <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>) / <span class=\"hljs-number\">2</span>.\n         },\n         _ =&gt; nums[length / <span class=\"hljs-number\">2</span>] <span class=\"hljs-keyword\">as</span> <span class=\"hljs-type\">f32</span>, \n    } \n} \n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">mode</span>(nums: &amp;[<span class=\"hljs-type\">u32</span>]) <span class=\"hljs-punctuation\">-&gt;</span><span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt; { \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">counter</span> = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>(); \n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">num</span> <span class=\"hljs-keyword\">in</span> nums.<span class=\"hljs-title function_ invoke__\">iter</span>() { \n        *counter.<span class=\"hljs-title function_ invoke__\">entry</span>(num).<span class=\"hljs-title function_ invoke__\">or_insert</span>(<span class=\"hljs-number\">0</span>) += <span class=\"hljs-number\">1</span>; \n    } \n    \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">moder</span>: HashMap&lt;<span class=\"hljs-type\">u32</span>, <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">u32</span>&gt;&gt; = HashMap::<span class=\"hljs-title function_ invoke__\">new</span>(); \n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">highest</span> = <span class=\"hljs-number\">0</span>; \n    <span class=\"hljs-keyword\">for</span> (key, value) <span class=\"hljs-keyword\">in</span> &amp;counter { \n        <span class=\"hljs-keyword\">if</span> value &gt; &amp;highest { \n            highest = *value; \n        } \n        moder.<span class=\"hljs-title function_ invoke__\">entry</span>(*value).<span class=\"hljs-title function_ invoke__\">or_insert_with</span>(<span class=\"hljs-type\">Vec</span>::new).<span class=\"hljs-title function_ invoke__\">push</span>(*key); \n    } \n    moder.<span class=\"hljs-title function_ invoke__\">get</span>(&amp;highest).<span class=\"hljs-title function_ invoke__\">copied</span>().<span class=\"hljs-title function_ invoke__\">unwrap_or_default</span>().<span class=\"hljs-title function_ invoke__\">collect</span>() \n}\n</code></pre>\n<p>When running the program it produced the following errors</p>\n<pre><code>error[E0308]: mismatched types\n  --&gt; compiler.rs:41:59\n   |\n41 |         moder.entry(*value).or_insert_with(Vec::new).push(*key);\n   |                                                      ---- ^^^^ expected `u32`, found `&amp;u32`\n   |                                                      |\n   |                                                      arguments to this function are incorrect\n   |\nnote: associated function defined here\nhelp: consider dereferencing the borrow\n   |\n41 |         moder.entry(*value).or_insert_with(Vec::new).push(**key);\n   |                                                           +\n\nerror[E0277]: the trait bound `Vec&lt;u32&gt;: Copy` is not satisfied\n  --&gt; compiler.rs:44:25\n   |\n44 |     moder.get(&amp;highest).copied().unwrap_or_default().collect()\n   |                         ^^^^^^ the trait `Copy` is not implemented for `Vec&lt;u32&gt;`\n   |\nnote: required by a bound in `Option::&lt;&amp;T&gt;::copied`\n\nerror[E0599]: `Vec&lt;u32&gt;` is not an iterator\n  --&gt; compiler.rs:44:54\n   |\n44 |       moder.get(&amp;highest).copied().unwrap_or_default().collect()\n   |                                                        ^^^^^^^ `Vec&lt;u32&gt;` is not an iterator; try calling `.into_iter()` or `.iter()`\n   |\n   = note: the following trait bounds were not satisfied:\n           `Vec&lt;u32&gt;: Iterator`\n           which is required by `&amp;mut Vec&lt;u32&gt;: Iterator`\n           `[u32]: Iterator`\n           which is required by `&amp;mut [u32]: Iterator`\n\nerror: aborting due to 3 previous errors\n\nSome errors have detailed explanations: E0277, E0308, E0599.\nFor more information about an error, try `rustc --explain E0277`.\n</code></pre>\n<p>The first error complaining about using a <code>&amp;key</code> was easy to fix with another deference. The second error related to copying the <code>Vec&lt;u32&gt;</code> , a type on the heap, was fixed by cloning instead. <a href=\"https://stackoverflow.com/a/63127877/7838574\">This stack overflow answer</a> helped figure that one out.</p>\n<p>What did I learn from ChatGPTs revision?</p>\n<ul>\n<li>When borrowing a vector it it&#x27;s probably best to use a slice. <a href=\"https://stackoverflow.com/a/32573802/7838574\">This stack overflow</a> elucidates it well.</li>\n<li>Hashmap&#x27;s <code>Entry</code>&#x27;s are extremely helpful.</li>\n</ul>\n<blockquote>\n<p>Ensures a value is in the entry by inserting the default if empty, and returns a mutable reference to the value in the entry. <a href=\"https://doc.rust-lang.org/std/collections/hash_map/enum.Entry.html\">Rust docs</a></p>\n</blockquote>",
            "url": "https://daniel-butler.com/articles/median-and-mode-rust",
            "title": "Median and Mode in Rust",
            "summary": "First example in the Rust book. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-03-05T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/rust-examples",
            "content_html": "<h2>Introduction</h2>\n<p>This is the collection of completed examples while working  though the excellently written <a href=\"https://doc.rust-lang.org/stable/book/\">rust book</a> on a journey to learn Rust.</p>\n<p>My experience with programming while going through this book is mostly python, a few years of JavaScript, a little less of typescript, and about a year and a half of Java. This is my second attempt to go through the book. At the time, types and differences in computers memory didn&#x27;t really click. This time around the decisions made with the language are making a lot more sense.</p>\n<p>Since I don&#x27;t have any real world problems to solve with rust, I&#x27;m completing every example and will be posting it here. Also, to help give feedback and to test chat gpt I&#x27;m using it to review the code.</p>\n<h2>Chapters</h2>\n<h3>8</h3>\n<ul>\n<li>8.3 <a href=\"https://www.daniel-butler.com/articles/median-and-mode-rust\">Median and Mode</a></li>\n<li>8.3 <a href=\"https://www.daniel-butler.com/articles/ust-ray%E2%80%94y-bay%E2%80%94example-fay\">Pig Latin</a></li>\n<li>8.3 <a href=\"https://daniel-butler.com\">Employee Directory</a></li>\n</ul>\n<h3>17</h3>\n<ul>\n<li>17.3 <a href=\"https://www.daniel-butler.com/articles/rust-dyn-traits-example\">Dynamic Traits</a></li>\n</ul>\n<p>More to come!</p>",
            "url": "https://daniel-butler.com/articles/rust-examples",
            "title": "Rust Book Examples",
            "summary": "Rust Book example and solutions index. Refactored with ChatGPT 4s help.",
            "date_modified": "2023-03-05T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        },
        {
            "id": "https://daniel-butler.com/articles/ust-ray—y-bay—example-fay",
            "content_html": "<p>This is a part of the series going through the <a href=\"https://doc.rust-lang.org/stable/book/ch08-03-hash-maps.html#summary\">rust book</a>. I&#x27;m most comfortable with python code, so I&#x27;ve sketched out the program to be written in rust with python first. It helps iron out misunderstandings.</p>\n<h2>Requirements</h2>\n<p>Convert strings to pig latin. The first consonant of each word is moved to the end of the word and “ay” is added, so “first” becomes “irst-fay.” Words that start with a vowel have “hay” added to the end instead (“apple” becomes “apple-hay”). Keep in mind the details about UTF-8 encoding!</p>\n<h2>Python Version</h2>\n<pre><code class=\"hljs language-python\">words = <span class=\"hljs-built_in\">input</span>()\n\noutput_words = []\n<span class=\"hljs-keyword\">for</span> word <span class=\"hljs-keyword\">in</span> words.split(<span class=\"hljs-string\">&quot; &quot;</span>):\n\t<span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(word) == <span class=\"hljs-number\">0</span>:\n\t\t<span class=\"hljs-keyword\">continue</span>\n\t\t\n\tstart = <span class=\"hljs-string\">&quot;&quot;</span>\n\tend = <span class=\"hljs-string\">&quot;ay&quot;</span>\n\tnew_word = <span class=\"hljs-string\">&quot;&quot;</span>\n\t\n\t<span class=\"hljs-keyword\">for</span> i, letter <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(word):\n\t\t<span class=\"hljs-keyword\">if</span> letter.lower() <span class=\"hljs-keyword\">in</span> [\n\t\t\t<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;e&#x27;</span>, <span class=\"hljs-string\">&#x27;i&#x27;</span>, <span class=\"hljs-string\">&#x27;o&#x27;</span>, <span class=\"hljs-string\">&#x27;u&#x27;</span>,\n\t\t]:\n\t\t\tstart = <span class=\"hljs-string\">&quot;f&quot;</span> <span class=\"hljs-keyword\">if</span> i == <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> start\n\t\t\tnew_word = <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{word[i:]}</span>-<span class=\"hljs-subst\">{start}</span><span class=\"hljs-subst\">{end}</span>&quot;</span>\n\t\t\t<span class=\"hljs-keyword\">break</span>\n\t\t\n\t\tstart += letter\n\t\t\n\toutput_words.append(new_word)\n\t\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot; &quot;</span>.join(output_words))\n</code></pre>\n<p>English Input\n<code>This is a great example of what it means to speak a foreign language with class.</code></p>\n<p>Translated\n<code>is-Thay is-fay a-fay eat-gray example-fay of-fay at-whay it-fay eans-may o-tay eak-spay a-fay oreign-fay anguage-lay ith-way ass.-clay</code></p>\n<h2>Rust version</h2>\n<p>I did use this <a href=\"https://codereview.stackexchange.com/questions/278267/rust-pig-latin-exercise-solution\">stack overflow</a> to unstick myself.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::io;\n\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n\t<span class=\"hljs-keyword\">const</span> VOWELS: [<span class=\"hljs-type\">char</span>; <span class=\"hljs-number\">5</span>] = [<span class=\"hljs-string\">&#x27;a&#x27;</span>, <span class=\"hljs-string\">&#x27;e&#x27;</span>, <span class=\"hljs-string\">&#x27;i&#x27;</span>, <span class=\"hljs-string\">&#x27;o&#x27;</span>, <span class=\"hljs-string\">&#x27;u&#x27;</span>];\n\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">input</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\tio::<span class=\"hljs-title function_ invoke__\">stdin</span>().<span class=\"hljs-title function_ invoke__\">read_line</span>(&amp;<span class=\"hljs-keyword\">mut</span> input).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">&quot;E most String&quot;</span>);\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">input</span> = input.<span class=\"hljs-title function_ invoke__\">trim</span>().<span class=\"hljs-title function_ invoke__\">to_string</span>();\n\t\n\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">translated_words</span>: <span class=\"hljs-type\">Vec</span>&lt;<span class=\"hljs-type\">String</span>&gt; = <span class=\"hljs-type\">Vec</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">word</span> <span class=\"hljs-keyword\">in</span> input.<span class=\"hljs-title function_ invoke__\">split_whitespace</span>() {\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">start</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">translated_word</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">new</span>();\n\t\t<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">complete</span> = <span class=\"hljs-literal\">false</span>;\n\t\t<span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">letter</span> <span class=\"hljs-keyword\">in</span> word.<span class=\"hljs-title function_ invoke__\">chars</span>() {\n\t\t\t<span class=\"hljs-keyword\">if</span> complete {\n\t\t\t\ttranslated_word.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t\t<span class=\"hljs-keyword\">continue</span>\n\t\t\t}\n\t\t\t\n\t\t\t<span class=\"hljs-keyword\">if</span> VOWELS.<span class=\"hljs-title function_ invoke__\">contains</span>(&amp;letter) {\n\t\t\t\t<span class=\"hljs-keyword\">if</span> start.<span class=\"hljs-title function_ invoke__\">len</span>() == <span class=\"hljs-number\">0</span> {\n\t\t\t\t\tstart = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">from</span>(<span class=\"hljs-string\">&quot;f&quot;</span>);\n\t\t\t\t}\n\t\t\t\ttranslated_word.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t\tcomplete = <span class=\"hljs-literal\">true</span>;\n\t\t\t\t\n\t\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t\tstart.<span class=\"hljs-title function_ invoke__\">push</span>(letter);\n\t\t\t}\n\t\t}\n\t\t\n\t\ttranslated_word = <span class=\"hljs-built_in\">format!</span>(<span class=\"hljs-string\">&quot;{}-{}ay&quot;</span>, translated_word, start);\n\t\t\n\t\ttranslated_words.<span class=\"hljs-title function_ invoke__\">push</span>(translated_word);\n\t}\n\t\n\t<span class=\"hljs-built_in\">println!</span>(<span class=\"hljs-string\">&quot;{}&quot;</span>, translated_words.<span class=\"hljs-title function_ invoke__\">join</span>(<span class=\"hljs-string\">&quot; &quot;</span>))\n}\n</code></pre>\n<p>English Input\n<code>This is a great example of what it means to speak a foreign language with class.</code></p>\n<p>Translated\n<code>is-Thay is-fay a-fay eat-gray example-fay of-fay at-whay it-fay eans-may o-tay eak-spay a-fay oreign-fay anguage-lay ith-way ass.-clay</code></p>\n<h2>Challenges</h2>\n<p>Creating the <code>{}-{}ay</code> because of Type mismatch of <code>String</code> and <code>str</code>. The problem seemed to be because I was adding a vector of chars and a string together.</p>\n<pre><code>error[E0308]: mismatched types\n  --&gt; compiler.rs:31:22\n   |\n31 |         translated_word += format!(&quot;-{}ay&quot;, &amp;(*start.as_str()));\n   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&amp;str`, found struct `String`\n   |\n   = note: this error originates in the macro `format` (in Nightly builds, run with -Z macro-backtrace for more info)\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0308`.\n</code></pre>",
            "url": "https://daniel-butler.com/articles/ust-ray—y-bay—example-fay",
            "title": "ust-ray y-bay example-fay",
            "summary": "Python and Rust code helps translate English to Pig Latin! Learn how to speak like a pro with this code, and avoid the pitfalls of type mismatches in Rust.",
            "date_modified": "2023-03-03T00:00:00.000Z",
            "author": {
                "name": "Spencer Sharp"
            }
        }
    ]
}